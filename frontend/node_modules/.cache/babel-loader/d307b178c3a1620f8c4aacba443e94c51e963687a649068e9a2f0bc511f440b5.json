{"ast":null,"code":"function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r]);}return n;},_extends.apply(null,arguments);}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _toPropertyKey(t){var i=_toPrimitive(t,\"string\");return\"symbol\"==typeof i?i:i+\"\";}function _toPrimitive(t,r){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||\"default\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(\"string\"===r?String:Number)(t);}import*as React from'react';import{Children,PureComponent,useCallback,useContext,useEffect}from'react';import{clsx}from'clsx';import{scalePoint}from'victory-vendor/d3-scale';import range from'es-toolkit/compat/range';import{Layer}from'../container/Layer';import{Text}from'../component/Text';import{getValueByDataKey}from'../util/ChartUtils';import{isNumber,isNotNil}from'../util/DataUtils';import{generatePrefixStyle}from'../util/CssPrefixUtils';import{useChartData,useDataIndex}from'../context/chartDataContext';import{BrushUpdateDispatchContext}from'../context/brushUpdateContext';import{useAppDispatch,useAppSelector}from'../state/hooks';import{setDataStartEndIndexes}from'../state/chartDataSlice';import{setBrushSettings}from'../state/brushSlice';import{PanoramaContextProvider}from'../context/PanoramaContext';import{selectBrushDimensions}from'../state/selectors/brushSelectors';import{useBrushChartSynchronisation}from'../synchronisation/useChartSynchronisation';import{resolveDefaultProps}from'../util/resolveDefaultProps';import{svgPropertiesNoEvents}from'../util/svgPropertiesNoEvents';// Why is this tickFormatter different from the other TickFormatters? This one allows to return numbers too for some reason.\nfunction DefaultTraveller(props){var{x,y,width,height,stroke}=props;var lineY=Math.floor(y+height/2)-1;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"rect\",{x:x,y:y,width:width,height:height,fill:stroke,stroke:\"none\"}),/*#__PURE__*/React.createElement(\"line\",{x1:x+1,y1:lineY,x2:x+width-1,y2:lineY,fill:\"none\",stroke:\"#fff\"}),/*#__PURE__*/React.createElement(\"line\",{x1:x+1,y1:lineY+2,x2:x+width-1,y2:lineY+2,fill:\"none\",stroke:\"#fff\"}));}function Traveller(props){var{travellerProps,travellerType}=props;if(/*#__PURE__*/React.isValidElement(travellerType)){// @ts-expect-error element cloning disagrees with the types (and it should)\nreturn/*#__PURE__*/React.cloneElement(travellerType,travellerProps);}if(typeof travellerType==='function'){return travellerType(travellerProps);}return/*#__PURE__*/React.createElement(DefaultTraveller,travellerProps);}function TravellerLayer(_ref){var _data$startIndex,_data$endIndex;var{otherProps,travellerX,id,onMouseEnter,onMouseLeave,onMouseDown,onTouchStart,onTravellerMoveKeyboard,onFocus,onBlur}=_ref;var{y,x:xFromProps,travellerWidth,height,traveller,ariaLabel,data,startIndex,endIndex}=otherProps;var x=Math.max(travellerX,xFromProps);var travellerProps=_objectSpread(_objectSpread({},svgPropertiesNoEvents(otherProps)),{},{x,y,width:travellerWidth,height});var ariaLabelBrush=ariaLabel||\"Min value: \".concat((_data$startIndex=data[startIndex])===null||_data$startIndex===void 0?void 0:_data$startIndex.name,\", Max value: \").concat((_data$endIndex=data[endIndex])===null||_data$endIndex===void 0?void 0:_data$endIndex.name);return/*#__PURE__*/React.createElement(Layer,{tabIndex:0,role:\"slider\",\"aria-label\":ariaLabelBrush,\"aria-valuenow\":travellerX,className:\"recharts-brush-traveller\",onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onMouseDown:onMouseDown,onTouchStart:onTouchStart,onKeyDown:e=>{if(!['ArrowLeft','ArrowRight'].includes(e.key)){return;}e.preventDefault();e.stopPropagation();onTravellerMoveKeyboard(e.key==='ArrowRight'?1:-1,id);},onFocus:onFocus,onBlur:onBlur,style:{cursor:'col-resize'}},/*#__PURE__*/React.createElement(Traveller,{travellerType:traveller,travellerProps:travellerProps}));}/*\n * This one cannot be a React Component because React is not happy with it returning only string | number.\n * React wants a full React.JSX.Element but that is not compatible with Text component.\n */function getTextOfTick(props){var{index,data,tickFormatter,dataKey}=props;// @ts-expect-error getValueByDataKey does not validate the output type\nvar text=getValueByDataKey(data[index],dataKey,index);return typeof tickFormatter==='function'?tickFormatter(text,index):text;}function getIndexInRange(valueRange,x){var len=valueRange.length;var start=0;var end=len-1;while(end-start>1){var middle=Math.floor((start+end)/2);if(valueRange[middle]>x){end=middle;}else{start=middle;}}return x>=valueRange[end]?end:start;}function getIndex(_ref2){var{startX,endX,scaleValues,gap,data}=_ref2;var lastIndex=data.length-1;var min=Math.min(startX,endX);var max=Math.max(startX,endX);var minIndex=getIndexInRange(scaleValues,min);var maxIndex=getIndexInRange(scaleValues,max);return{startIndex:minIndex-minIndex%gap,endIndex:maxIndex===lastIndex?lastIndex:maxIndex-maxIndex%gap};}function Background(_ref3){var{x,y,width,height,fill,stroke}=_ref3;return/*#__PURE__*/React.createElement(\"rect\",{stroke:stroke,fill:fill,x:x,y:y,width:width,height:height});}function BrushText(_ref4){var{startIndex,endIndex,y,height,travellerWidth,stroke,tickFormatter,dataKey,data,startX,endX}=_ref4;var offset=5;var attrs={pointerEvents:'none',fill:stroke};return/*#__PURE__*/React.createElement(Layer,{className:\"recharts-brush-texts\"},/*#__PURE__*/React.createElement(Text,_extends({textAnchor:\"end\",verticalAnchor:\"middle\",x:Math.min(startX,endX)-offset,y:y+height/2},attrs),getTextOfTick({index:startIndex,tickFormatter,dataKey,data})),/*#__PURE__*/React.createElement(Text,_extends({textAnchor:\"start\",verticalAnchor:\"middle\",x:Math.max(startX,endX)+travellerWidth+offset,y:y+height/2},attrs),getTextOfTick({index:endIndex,tickFormatter,dataKey,data})));}function Slide(_ref5){var{y,height,stroke,travellerWidth,startX,endX,onMouseEnter,onMouseLeave,onMouseDown,onTouchStart}=_ref5;var x=Math.min(startX,endX)+travellerWidth;var width=Math.max(Math.abs(endX-startX)-travellerWidth,0);return/*#__PURE__*/React.createElement(\"rect\",{className:\"recharts-brush-slide\",onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onMouseDown:onMouseDown,onTouchStart:onTouchStart,style:{cursor:'move'},stroke:\"none\",fill:stroke,fillOpacity:0.2,x:x,y:y,width:width,height:height});}function Panorama(_ref6){var{x,y,width,height,data,children,padding}=_ref6;var isPanoramic=React.Children.count(children)===1;if(!isPanoramic){return null;}var chartElement=Children.only(children);if(!chartElement){return null;}return/*#__PURE__*/React.cloneElement(chartElement,{x,y,width,height,margin:padding,compact:true,data});}var createScale=_ref7=>{var{data,startIndex,endIndex,x,width,travellerWidth}=_ref7;if(!data||!data.length){return{};}var len=data.length;var scale=scalePoint().domain(range(0,len)).range([x,x+width-travellerWidth]);var scaleValues=scale.domain().map(entry=>scale(entry)).filter(isNotNil);return{isTextActive:false,isSlideMoving:false,isTravellerMoving:false,isTravellerFocused:false,startX:scale(startIndex),endX:scale(endIndex),scale,scaleValues};};var isTouch=e=>e.changedTouches&&!!e.changedTouches.length;class BrushWithState extends PureComponent{constructor(props){super(props);_defineProperty(this,\"handleDrag\",e=>{if(this.leaveTimer){clearTimeout(this.leaveTimer);this.leaveTimer=null;}if(this.state.isTravellerMoving){this.handleTravellerMove(e);}else if(this.state.isSlideMoving){this.handleSlideDrag(e);}});_defineProperty(this,\"handleTouchMove\",e=>{if(e.changedTouches!=null&&e.changedTouches.length>0){this.handleDrag(e.changedTouches[0]);}});_defineProperty(this,\"handleDragEnd\",()=>{this.setState({isTravellerMoving:false,isSlideMoving:false},()=>{var{endIndex,onDragEnd,startIndex}=this.props;onDragEnd===null||onDragEnd===void 0||onDragEnd({endIndex,startIndex});});this.detachDragEndListener();});_defineProperty(this,\"handleLeaveWrapper\",()=>{if(this.state.isTravellerMoving||this.state.isSlideMoving){this.leaveTimer=window.setTimeout(this.handleDragEnd,this.props.leaveTimeOut);}});_defineProperty(this,\"handleEnterSlideOrTraveller\",()=>{this.setState({isTextActive:true});});_defineProperty(this,\"handleLeaveSlideOrTraveller\",()=>{this.setState({isTextActive:false});});_defineProperty(this,\"handleSlideDragStart\",e=>{var event=isTouch(e)?e.changedTouches[0]:e;this.setState({isTravellerMoving:false,isSlideMoving:true,slideMoveStartX:event.pageX});this.attachDragEndListener();});_defineProperty(this,\"handleTravellerMoveKeyboard\",(direction,id)=>{var{data,gap,startIndex,endIndex}=this.props;// scaleValues are a list of coordinates. For example: [65, 250, 435, 620, 805, 990].\nvar{scaleValues,startX,endX}=this.state;if(scaleValues==null){return;}// unless we search for the closest scaleValue to the current coordinate\n// we need to move travelers via index when using the keyboard\nvar currentIndex=-1;if(id==='startX'){currentIndex=startIndex;}else if(id==='endX'){currentIndex=endIndex;}if(currentIndex<0||currentIndex>=data.length){return;}var newIndex=currentIndex+direction;if(newIndex===-1||newIndex>=scaleValues.length){return;}var newScaleValue=scaleValues[newIndex];// Prevent travellers from being on top of each other or overlapping\nif(id==='startX'&&newScaleValue>=endX||id==='endX'&&newScaleValue<=startX){return;}this.setState(// @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n{[id]:newScaleValue},()=>{this.props.onChange(getIndex({startX:this.state.startX,endX:this.state.endX,data,gap,scaleValues}));});});this.travellerDragStartHandlers={startX:this.handleTravellerDragStart.bind(this,'startX'),endX:this.handleTravellerDragStart.bind(this,'endX')};this.state={brushMoveStartX:0,movingTravellerId:undefined,endX:0,startX:0,slideMoveStartX:0};}static getDerivedStateFromProps(nextProps,prevState){var{data,width,x,travellerWidth,startIndex,endIndex,startIndexControlledFromProps,endIndexControlledFromProps}=nextProps;if(data!==prevState.prevData){return _objectSpread({prevData:data,prevTravellerWidth:travellerWidth,prevX:x,prevWidth:width},data&&data.length?createScale({data,width,x,travellerWidth,startIndex,endIndex}):{scale:undefined,scaleValues:undefined});}var prevScale=prevState.scale;if(prevScale&&(width!==prevState.prevWidth||x!==prevState.prevX||travellerWidth!==prevState.prevTravellerWidth)){prevScale.range([x,x+width-travellerWidth]);var scaleValues=prevScale.domain().map(entry=>prevScale(entry)).filter(value=>value!=null);return{prevData:data,prevTravellerWidth:travellerWidth,prevX:x,prevWidth:width,startX:prevScale(nextProps.startIndex),endX:prevScale(nextProps.endIndex),scaleValues};}if(prevState.scale&&!prevState.isSlideMoving&&!prevState.isTravellerMoving&&!prevState.isTravellerFocused&&!prevState.isTextActive){/*\n       * If the startIndex or endIndex are controlled from the outside,\n       * we need to keep the startX and end up to date.\n       * Also we do not want to do that while user is interacting in the brush,\n       * because this will trigger re-render and interrupt the drag&drop.\n       */if(startIndexControlledFromProps!=null&&prevState.prevStartIndexControlledFromProps!==startIndexControlledFromProps){return{startX:prevState.scale(startIndexControlledFromProps),prevStartIndexControlledFromProps:startIndexControlledFromProps};}if(endIndexControlledFromProps!=null&&prevState.prevEndIndexControlledFromProps!==endIndexControlledFromProps){return{endX:prevState.scale(endIndexControlledFromProps),prevEndIndexControlledFromProps:endIndexControlledFromProps};}}return null;}componentWillUnmount(){if(this.leaveTimer){clearTimeout(this.leaveTimer);this.leaveTimer=null;}this.detachDragEndListener();}attachDragEndListener(){window.addEventListener('mouseup',this.handleDragEnd,true);window.addEventListener('touchend',this.handleDragEnd,true);window.addEventListener('mousemove',this.handleDrag,true);}detachDragEndListener(){window.removeEventListener('mouseup',this.handleDragEnd,true);window.removeEventListener('touchend',this.handleDragEnd,true);window.removeEventListener('mousemove',this.handleDrag,true);}handleSlideDrag(e){var{slideMoveStartX,startX,endX,scaleValues}=this.state;if(scaleValues==null){return;}var{x,width,travellerWidth,startIndex,endIndex,onChange,data,gap}=this.props;var delta=e.pageX-slideMoveStartX;if(delta>0){delta=Math.min(delta,x+width-travellerWidth-endX,x+width-travellerWidth-startX);}else if(delta<0){delta=Math.max(delta,x-startX,x-endX);}var newIndex=getIndex({startX:startX+delta,endX:endX+delta,data,gap,scaleValues});if((newIndex.startIndex!==startIndex||newIndex.endIndex!==endIndex)&&onChange){onChange(newIndex);}this.setState({startX:startX+delta,endX:endX+delta,slideMoveStartX:e.pageX});}handleTravellerDragStart(id,e){var event=isTouch(e)?e.changedTouches[0]:e;this.setState({isSlideMoving:false,isTravellerMoving:true,movingTravellerId:id,brushMoveStartX:event.pageX});this.attachDragEndListener();}handleTravellerMove(e){var{brushMoveStartX,movingTravellerId,endX,startX,scaleValues}=this.state;if(movingTravellerId==null||scaleValues==null){return;}var prevValue=this.state[movingTravellerId];var{x,width,travellerWidth,onChange,gap,data}=this.props;var params={startX:this.state.startX,endX:this.state.endX,data,gap,scaleValues};var delta=e.pageX-brushMoveStartX;if(delta>0){delta=Math.min(delta,x+width-travellerWidth-prevValue);}else if(delta<0){delta=Math.max(delta,x-prevValue);}params[movingTravellerId]=prevValue+delta;var newIndex=getIndex(params);var{startIndex,endIndex}=newIndex;var isFullGap=()=>{var lastIndex=data.length-1;if(movingTravellerId==='startX'&&(endX>startX?startIndex%gap===0:endIndex%gap===0)||endX<startX&&endIndex===lastIndex||movingTravellerId==='endX'&&(endX>startX?endIndex%gap===0:startIndex%gap===0)||endX>startX&&endIndex===lastIndex){return true;}return false;};this.setState(// @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n{[movingTravellerId]:prevValue+delta,brushMoveStartX:e.pageX},()=>{if(onChange){if(isFullGap()){onChange(newIndex);}}});}render(){var{data,className,children,x,y,dy,width,height,alwaysShowText,fill,stroke,startIndex,endIndex,travellerWidth,tickFormatter,dataKey,padding}=this.props;var{startX,endX,isTextActive,isSlideMoving,isTravellerMoving,isTravellerFocused}=this.state;if(!data||!data.length||!isNumber(x)||!isNumber(y)||!isNumber(width)||!isNumber(height)||width<=0||height<=0){return null;}var layerClass=clsx('recharts-brush',className);var style=generatePrefixStyle('userSelect','none');var calculatedY=y+(dy!==null&&dy!==void 0?dy:0);return/*#__PURE__*/React.createElement(Layer,{className:layerClass,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:style},/*#__PURE__*/React.createElement(Background,{x:x,y:calculatedY,width:width,height:height,fill:fill,stroke:stroke}),/*#__PURE__*/React.createElement(PanoramaContextProvider,null,/*#__PURE__*/React.createElement(Panorama,{x:x,y:calculatedY,width:width,height:height,data:data,padding:padding},children)),/*#__PURE__*/React.createElement(Slide,{y:calculatedY,height:height,stroke:stroke,travellerWidth:travellerWidth,startX:startX,endX:endX,onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart}),/*#__PURE__*/React.createElement(TravellerLayer,{travellerX:startX,id:\"startX\",otherProps:_objectSpread(_objectSpread({},this.props),{},{y:calculatedY}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.startX,onTouchStart:this.travellerDragStartHandlers.startX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:true});},onBlur:()=>{this.setState({isTravellerFocused:false});}}),/*#__PURE__*/React.createElement(TravellerLayer,{travellerX:endX,id:\"endX\",otherProps:_objectSpread(_objectSpread({},this.props),{},{y:calculatedY}),onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers.endX,onTouchStart:this.travellerDragStartHandlers.endX,onTravellerMoveKeyboard:this.handleTravellerMoveKeyboard,onFocus:()=>{this.setState({isTravellerFocused:true});},onBlur:()=>{this.setState({isTravellerFocused:false});}}),(isTextActive||isSlideMoving||isTravellerMoving||isTravellerFocused||alwaysShowText)&&/*#__PURE__*/React.createElement(BrushText,{startIndex:startIndex,endIndex:endIndex,y:calculatedY,height:height,travellerWidth:travellerWidth,stroke:stroke,tickFormatter:tickFormatter,dataKey:dataKey,data:data,startX:startX,endX:endX}));}}function BrushInternal(props){var dispatch=useAppDispatch();var chartData=useChartData();var dataIndexes=useDataIndex();var onChangeFromContext=useContext(BrushUpdateDispatchContext);var onChangeFromProps=props.onChange;var{startIndex:startIndexFromProps,endIndex:endIndexFromProps}=props;useEffect(()=>{// start and end index can be controlled from props, and we need them to stay up-to-date in the Redux state too\ndispatch(setDataStartEndIndexes({startIndex:startIndexFromProps,endIndex:endIndexFromProps}));},[dispatch,endIndexFromProps,startIndexFromProps]);useBrushChartSynchronisation();var onChange=useCallback(nextState=>{if(dataIndexes==null){return;}var{startIndex,endIndex}=dataIndexes;if(nextState.startIndex!==startIndex||nextState.endIndex!==endIndex){onChangeFromContext===null||onChangeFromContext===void 0||onChangeFromContext(nextState);onChangeFromProps===null||onChangeFromProps===void 0||onChangeFromProps(nextState);dispatch(setDataStartEndIndexes(nextState));}},[onChangeFromProps,onChangeFromContext,dispatch,dataIndexes]);var brushDimensions=useAppSelector(selectBrushDimensions);if(brushDimensions==null||dataIndexes==null||chartData==null||!chartData.length){return null;}var{startIndex,endIndex}=dataIndexes;var{x,y,width}=brushDimensions;var contextProperties={data:chartData,x,y,width,startIndex,endIndex,onChange};return/*#__PURE__*/React.createElement(BrushWithState,_extends({},props,contextProperties,{startIndexControlledFromProps:startIndexFromProps!==null&&startIndexFromProps!==void 0?startIndexFromProps:undefined,endIndexControlledFromProps:endIndexFromProps!==null&&endIndexFromProps!==void 0?endIndexFromProps:undefined}));}function BrushSettingsDispatcher(props){var dispatch=useAppDispatch();useEffect(()=>{dispatch(setBrushSettings(props));return()=>{dispatch(setBrushSettings(null));};},[dispatch,props]);return null;}export var defaultBrushProps={height:40,travellerWidth:5,gap:1,fill:'#fff',stroke:'#666',padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1000,alwaysShowText:false};export function Brush(outsideProps){var props=resolveDefaultProps(outsideProps,defaultBrushProps);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BrushSettingsDispatcher,{height:props.height,x:props.x,y:props.y,width:props.width,padding:props.padding}),/*#__PURE__*/React.createElement(BrushInternal,props));}Brush.displayName='Brush';","map":{"version":3,"names":["_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","ownKeys","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","Children","PureComponent","useCallback","useContext","useEffect","clsx","scalePoint","range","Layer","Text","getValueByDataKey","isNumber","isNotNil","generatePrefixStyle","useChartData","useDataIndex","BrushUpdateDispatchContext","useAppDispatch","useAppSelector","setDataStartEndIndexes","setBrushSettings","PanoramaContextProvider","selectBrushDimensions","useBrushChartSynchronisation","resolveDefaultProps","svgPropertiesNoEvents","DefaultTraveller","props","x","y","width","height","stroke","lineY","Math","floor","createElement","Fragment","fill","x1","y1","x2","y2","Traveller","travellerProps","travellerType","isValidElement","cloneElement","TravellerLayer","_ref","_data$startIndex","_data$endIndex","otherProps","travellerX","id","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","onTravellerMoveKeyboard","onFocus","onBlur","xFromProps","travellerWidth","traveller","ariaLabel","data","startIndex","endIndex","max","ariaLabelBrush","concat","name","tabIndex","role","className","onKeyDown","includes","key","preventDefault","stopPropagation","style","cursor","getTextOfTick","index","tickFormatter","dataKey","text","getIndexInRange","valueRange","len","start","end","middle","getIndex","_ref2","startX","endX","scaleValues","gap","lastIndex","min","minIndex","maxIndex","Background","_ref3","BrushText","_ref4","offset","attrs","pointerEvents","textAnchor","verticalAnchor","Slide","_ref5","abs","fillOpacity","Panorama","_ref6","children","padding","isPanoramic","count","chartElement","only","margin","compact","createScale","_ref7","scale","domain","map","entry","isTextActive","isSlideMoving","isTravellerMoving","isTravellerFocused","isTouch","changedTouches","BrushWithState","constructor","leaveTimer","clearTimeout","state","handleTravellerMove","handleSlideDrag","handleDrag","setState","onDragEnd","detachDragEndListener","window","setTimeout","handleDragEnd","leaveTimeOut","event","slideMoveStartX","pageX","attachDragEndListener","direction","currentIndex","newIndex","newScaleValue","onChange","travellerDragStartHandlers","handleTravellerDragStart","brushMoveStartX","movingTravellerId","undefined","getDerivedStateFromProps","nextProps","prevState","startIndexControlledFromProps","endIndexControlledFromProps","prevData","prevTravellerWidth","prevX","prevWidth","prevScale","prevStartIndexControlledFromProps","prevEndIndexControlledFromProps","componentWillUnmount","addEventListener","removeEventListener","delta","prevValue","params","isFullGap","render","dy","alwaysShowText","layerClass","calculatedY","handleLeaveWrapper","onTouchMove","handleTouchMove","handleEnterSlideOrTraveller","handleLeaveSlideOrTraveller","handleSlideDragStart","handleTravellerMoveKeyboard","BrushInternal","dispatch","chartData","dataIndexes","onChangeFromContext","onChangeFromProps","startIndexFromProps","endIndexFromProps","nextState","brushDimensions","contextProperties","BrushSettingsDispatcher","defaultBrushProps","top","right","bottom","left","Brush","outsideProps","displayName"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/node_modules/recharts/es6/cartesian/Brush.js"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { Children, PureComponent, useCallback, useContext, useEffect } from 'react';\nimport { clsx } from 'clsx';\nimport { scalePoint } from 'victory-vendor/d3-scale';\nimport range from 'es-toolkit/compat/range';\nimport { Layer } from '../container/Layer';\nimport { Text } from '../component/Text';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { isNumber, isNotNil } from '../util/DataUtils';\nimport { generatePrefixStyle } from '../util/CssPrefixUtils';\nimport { useChartData, useDataIndex } from '../context/chartDataContext';\nimport { BrushUpdateDispatchContext } from '../context/brushUpdateContext';\nimport { useAppDispatch, useAppSelector } from '../state/hooks';\nimport { setDataStartEndIndexes } from '../state/chartDataSlice';\nimport { setBrushSettings } from '../state/brushSlice';\nimport { PanoramaContextProvider } from '../context/PanoramaContext';\nimport { selectBrushDimensions } from '../state/selectors/brushSelectors';\nimport { useBrushChartSynchronisation } from '../synchronisation/useChartSynchronisation';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\n\n// Why is this tickFormatter different from the other TickFormatters? This one allows to return numbers too for some reason.\n\nfunction DefaultTraveller(props) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    stroke\n  } = props;\n  var lineY = Math.floor(y + height / 2) - 1;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"rect\", {\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    fill: stroke,\n    stroke: \"none\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY,\n    x2: x + width - 1,\n    y2: lineY,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: x + 1,\n    y1: lineY + 2,\n    x2: x + width - 1,\n    y2: lineY + 2,\n    fill: \"none\",\n    stroke: \"#fff\"\n  }));\n}\nfunction Traveller(props) {\n  var {\n    travellerProps,\n    travellerType\n  } = props;\n  if (/*#__PURE__*/React.isValidElement(travellerType)) {\n    // @ts-expect-error element cloning disagrees with the types (and it should)\n    return /*#__PURE__*/React.cloneElement(travellerType, travellerProps);\n  }\n  if (typeof travellerType === 'function') {\n    return travellerType(travellerProps);\n  }\n  return /*#__PURE__*/React.createElement(DefaultTraveller, travellerProps);\n}\nfunction TravellerLayer(_ref) {\n  var _data$startIndex, _data$endIndex;\n  var {\n    otherProps,\n    travellerX,\n    id,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart,\n    onTravellerMoveKeyboard,\n    onFocus,\n    onBlur\n  } = _ref;\n  var {\n    y,\n    x: xFromProps,\n    travellerWidth,\n    height,\n    traveller,\n    ariaLabel,\n    data,\n    startIndex,\n    endIndex\n  } = otherProps;\n  var x = Math.max(travellerX, xFromProps);\n  var travellerProps = _objectSpread(_objectSpread({}, svgPropertiesNoEvents(otherProps)), {}, {\n    x,\n    y,\n    width: travellerWidth,\n    height\n  });\n  var ariaLabelBrush = ariaLabel || \"Min value: \".concat((_data$startIndex = data[startIndex]) === null || _data$startIndex === void 0 ? void 0 : _data$startIndex.name, \", Max value: \").concat((_data$endIndex = data[endIndex]) === null || _data$endIndex === void 0 ? void 0 : _data$endIndex.name);\n  return /*#__PURE__*/React.createElement(Layer, {\n    tabIndex: 0,\n    role: \"slider\",\n    \"aria-label\": ariaLabelBrush,\n    \"aria-valuenow\": travellerX,\n    className: \"recharts-brush-traveller\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    onKeyDown: e => {\n      if (!['ArrowLeft', 'ArrowRight'].includes(e.key)) {\n        return;\n      }\n      e.preventDefault();\n      e.stopPropagation();\n      onTravellerMoveKeyboard(e.key === 'ArrowRight' ? 1 : -1, id);\n    },\n    onFocus: onFocus,\n    onBlur: onBlur,\n    style: {\n      cursor: 'col-resize'\n    }\n  }, /*#__PURE__*/React.createElement(Traveller, {\n    travellerType: traveller,\n    travellerProps: travellerProps\n  }));\n}\n/*\n * This one cannot be a React Component because React is not happy with it returning only string | number.\n * React wants a full React.JSX.Element but that is not compatible with Text component.\n */\nfunction getTextOfTick(props) {\n  var {\n    index,\n    data,\n    tickFormatter,\n    dataKey\n  } = props;\n  // @ts-expect-error getValueByDataKey does not validate the output type\n  var text = getValueByDataKey(data[index], dataKey, index);\n  return typeof tickFormatter === 'function' ? tickFormatter(text, index) : text;\n}\nfunction getIndexInRange(valueRange, x) {\n  var len = valueRange.length;\n  var start = 0;\n  var end = len - 1;\n  while (end - start > 1) {\n    var middle = Math.floor((start + end) / 2);\n    if (valueRange[middle] > x) {\n      end = middle;\n    } else {\n      start = middle;\n    }\n  }\n  return x >= valueRange[end] ? end : start;\n}\nfunction getIndex(_ref2) {\n  var {\n    startX,\n    endX,\n    scaleValues,\n    gap,\n    data\n  } = _ref2;\n  var lastIndex = data.length - 1;\n  var min = Math.min(startX, endX);\n  var max = Math.max(startX, endX);\n  var minIndex = getIndexInRange(scaleValues, min);\n  var maxIndex = getIndexInRange(scaleValues, max);\n  return {\n    startIndex: minIndex - minIndex % gap,\n    endIndex: maxIndex === lastIndex ? lastIndex : maxIndex - maxIndex % gap\n  };\n}\nfunction Background(_ref3) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    fill,\n    stroke\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    stroke: stroke,\n    fill: fill,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction BrushText(_ref4) {\n  var {\n    startIndex,\n    endIndex,\n    y,\n    height,\n    travellerWidth,\n    stroke,\n    tickFormatter,\n    dataKey,\n    data,\n    startX,\n    endX\n  } = _ref4;\n  var offset = 5;\n  var attrs = {\n    pointerEvents: 'none',\n    fill: stroke\n  };\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-brush-texts\"\n  }, /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"end\",\n    verticalAnchor: \"middle\",\n    x: Math.min(startX, endX) - offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: startIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })), /*#__PURE__*/React.createElement(Text, _extends({\n    textAnchor: \"start\",\n    verticalAnchor: \"middle\",\n    x: Math.max(startX, endX) + travellerWidth + offset,\n    y: y + height / 2\n  }, attrs), getTextOfTick({\n    index: endIndex,\n    tickFormatter,\n    dataKey,\n    data\n  })));\n}\nfunction Slide(_ref5) {\n  var {\n    y,\n    height,\n    stroke,\n    travellerWidth,\n    startX,\n    endX,\n    onMouseEnter,\n    onMouseLeave,\n    onMouseDown,\n    onTouchStart\n  } = _ref5;\n  var x = Math.min(startX, endX) + travellerWidth;\n  var width = Math.max(Math.abs(endX - startX) - travellerWidth, 0);\n  return /*#__PURE__*/React.createElement(\"rect\", {\n    className: \"recharts-brush-slide\",\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseDown: onMouseDown,\n    onTouchStart: onTouchStart,\n    style: {\n      cursor: 'move'\n    },\n    stroke: \"none\",\n    fill: stroke,\n    fillOpacity: 0.2,\n    x: x,\n    y: y,\n    width: width,\n    height: height\n  });\n}\nfunction Panorama(_ref6) {\n  var {\n    x,\n    y,\n    width,\n    height,\n    data,\n    children,\n    padding\n  } = _ref6;\n  var isPanoramic = React.Children.count(children) === 1;\n  if (!isPanoramic) {\n    return null;\n  }\n  var chartElement = Children.only(children);\n  if (!chartElement) {\n    return null;\n  }\n  return /*#__PURE__*/React.cloneElement(chartElement, {\n    x,\n    y,\n    width,\n    height,\n    margin: padding,\n    compact: true,\n    data\n  });\n}\nvar createScale = _ref7 => {\n  var {\n    data,\n    startIndex,\n    endIndex,\n    x,\n    width,\n    travellerWidth\n  } = _ref7;\n  if (!data || !data.length) {\n    return {};\n  }\n  var len = data.length;\n  var scale = scalePoint().domain(range(0, len)).range([x, x + width - travellerWidth]);\n  var scaleValues = scale.domain().map(entry => scale(entry)).filter(isNotNil);\n  return {\n    isTextActive: false,\n    isSlideMoving: false,\n    isTravellerMoving: false,\n    isTravellerFocused: false,\n    startX: scale(startIndex),\n    endX: scale(endIndex),\n    scale,\n    scaleValues\n  };\n};\nvar isTouch = e => e.changedTouches && !!e.changedTouches.length;\nclass BrushWithState extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"handleDrag\", e => {\n      if (this.leaveTimer) {\n        clearTimeout(this.leaveTimer);\n        this.leaveTimer = null;\n      }\n      if (this.state.isTravellerMoving) {\n        this.handleTravellerMove(e);\n      } else if (this.state.isSlideMoving) {\n        this.handleSlideDrag(e);\n      }\n    });\n    _defineProperty(this, \"handleTouchMove\", e => {\n      if (e.changedTouches != null && e.changedTouches.length > 0) {\n        this.handleDrag(e.changedTouches[0]);\n      }\n    });\n    _defineProperty(this, \"handleDragEnd\", () => {\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: false\n      }, () => {\n        var {\n          endIndex,\n          onDragEnd,\n          startIndex\n        } = this.props;\n        onDragEnd === null || onDragEnd === void 0 || onDragEnd({\n          endIndex,\n          startIndex\n        });\n      });\n      this.detachDragEndListener();\n    });\n    _defineProperty(this, \"handleLeaveWrapper\", () => {\n      if (this.state.isTravellerMoving || this.state.isSlideMoving) {\n        this.leaveTimer = window.setTimeout(this.handleDragEnd, this.props.leaveTimeOut);\n      }\n    });\n    _defineProperty(this, \"handleEnterSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: true\n      });\n    });\n    _defineProperty(this, \"handleLeaveSlideOrTraveller\", () => {\n      this.setState({\n        isTextActive: false\n      });\n    });\n    _defineProperty(this, \"handleSlideDragStart\", e => {\n      var event = isTouch(e) ? e.changedTouches[0] : e;\n      this.setState({\n        isTravellerMoving: false,\n        isSlideMoving: true,\n        slideMoveStartX: event.pageX\n      });\n      this.attachDragEndListener();\n    });\n    _defineProperty(this, \"handleTravellerMoveKeyboard\", (direction, id) => {\n      var {\n        data,\n        gap,\n        startIndex,\n        endIndex\n      } = this.props;\n      // scaleValues are a list of coordinates. For example: [65, 250, 435, 620, 805, 990].\n      var {\n        scaleValues,\n        startX,\n        endX\n      } = this.state;\n      if (scaleValues == null) {\n        return;\n      }\n\n      // unless we search for the closest scaleValue to the current coordinate\n      // we need to move travelers via index when using the keyboard\n      var currentIndex = -1;\n      if (id === 'startX') {\n        currentIndex = startIndex;\n      } else if (id === 'endX') {\n        currentIndex = endIndex;\n      }\n      if (currentIndex < 0 || currentIndex >= data.length) {\n        return;\n      }\n      var newIndex = currentIndex + direction;\n      if (newIndex === -1 || newIndex >= scaleValues.length) {\n        return;\n      }\n      var newScaleValue = scaleValues[newIndex];\n\n      // Prevent travellers from being on top of each other or overlapping\n      if (id === 'startX' && newScaleValue >= endX || id === 'endX' && newScaleValue <= startX) {\n        return;\n      }\n      this.setState(\n      // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n      {\n        [id]: newScaleValue\n      }, () => {\n        this.props.onChange(getIndex({\n          startX: this.state.startX,\n          endX: this.state.endX,\n          data,\n          gap,\n          scaleValues\n        }));\n      });\n    });\n    this.travellerDragStartHandlers = {\n      startX: this.handleTravellerDragStart.bind(this, 'startX'),\n      endX: this.handleTravellerDragStart.bind(this, 'endX')\n    };\n    this.state = {\n      brushMoveStartX: 0,\n      movingTravellerId: undefined,\n      endX: 0,\n      startX: 0,\n      slideMoveStartX: 0\n    };\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    var {\n      data,\n      width,\n      x,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      startIndexControlledFromProps,\n      endIndexControlledFromProps\n    } = nextProps;\n    if (data !== prevState.prevData) {\n      return _objectSpread({\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width\n      }, data && data.length ? createScale({\n        data,\n        width,\n        x,\n        travellerWidth,\n        startIndex,\n        endIndex\n      }) : {\n        scale: undefined,\n        scaleValues: undefined\n      });\n    }\n    var prevScale = prevState.scale;\n    if (prevScale && (width !== prevState.prevWidth || x !== prevState.prevX || travellerWidth !== prevState.prevTravellerWidth)) {\n      prevScale.range([x, x + width - travellerWidth]);\n      var scaleValues = prevScale.domain().map(entry => prevScale(entry)).filter(value => value != null);\n      return {\n        prevData: data,\n        prevTravellerWidth: travellerWidth,\n        prevX: x,\n        prevWidth: width,\n        startX: prevScale(nextProps.startIndex),\n        endX: prevScale(nextProps.endIndex),\n        scaleValues\n      };\n    }\n    if (prevState.scale && !prevState.isSlideMoving && !prevState.isTravellerMoving && !prevState.isTravellerFocused && !prevState.isTextActive) {\n      /*\n       * If the startIndex or endIndex are controlled from the outside,\n       * we need to keep the startX and end up to date.\n       * Also we do not want to do that while user is interacting in the brush,\n       * because this will trigger re-render and interrupt the drag&drop.\n       */\n      if (startIndexControlledFromProps != null && prevState.prevStartIndexControlledFromProps !== startIndexControlledFromProps) {\n        return {\n          startX: prevState.scale(startIndexControlledFromProps),\n          prevStartIndexControlledFromProps: startIndexControlledFromProps\n        };\n      }\n      if (endIndexControlledFromProps != null && prevState.prevEndIndexControlledFromProps !== endIndexControlledFromProps) {\n        return {\n          endX: prevState.scale(endIndexControlledFromProps),\n          prevEndIndexControlledFromProps: endIndexControlledFromProps\n        };\n      }\n    }\n    return null;\n  }\n  componentWillUnmount() {\n    if (this.leaveTimer) {\n      clearTimeout(this.leaveTimer);\n      this.leaveTimer = null;\n    }\n    this.detachDragEndListener();\n  }\n  attachDragEndListener() {\n    window.addEventListener('mouseup', this.handleDragEnd, true);\n    window.addEventListener('touchend', this.handleDragEnd, true);\n    window.addEventListener('mousemove', this.handleDrag, true);\n  }\n  detachDragEndListener() {\n    window.removeEventListener('mouseup', this.handleDragEnd, true);\n    window.removeEventListener('touchend', this.handleDragEnd, true);\n    window.removeEventListener('mousemove', this.handleDrag, true);\n  }\n  handleSlideDrag(e) {\n    var {\n      slideMoveStartX,\n      startX,\n      endX,\n      scaleValues\n    } = this.state;\n    if (scaleValues == null) {\n      return;\n    }\n    var {\n      x,\n      width,\n      travellerWidth,\n      startIndex,\n      endIndex,\n      onChange,\n      data,\n      gap\n    } = this.props;\n    var delta = e.pageX - slideMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - endX, x + width - travellerWidth - startX);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - startX, x - endX);\n    }\n    var newIndex = getIndex({\n      startX: startX + delta,\n      endX: endX + delta,\n      data,\n      gap,\n      scaleValues\n    });\n    if ((newIndex.startIndex !== startIndex || newIndex.endIndex !== endIndex) && onChange) {\n      onChange(newIndex);\n    }\n    this.setState({\n      startX: startX + delta,\n      endX: endX + delta,\n      slideMoveStartX: e.pageX\n    });\n  }\n  handleTravellerDragStart(id, e) {\n    var event = isTouch(e) ? e.changedTouches[0] : e;\n    this.setState({\n      isSlideMoving: false,\n      isTravellerMoving: true,\n      movingTravellerId: id,\n      brushMoveStartX: event.pageX\n    });\n    this.attachDragEndListener();\n  }\n  handleTravellerMove(e) {\n    var {\n      brushMoveStartX,\n      movingTravellerId,\n      endX,\n      startX,\n      scaleValues\n    } = this.state;\n    if (movingTravellerId == null || scaleValues == null) {\n      return;\n    }\n    var prevValue = this.state[movingTravellerId];\n    var {\n      x,\n      width,\n      travellerWidth,\n      onChange,\n      gap,\n      data\n    } = this.props;\n    var params = {\n      startX: this.state.startX,\n      endX: this.state.endX,\n      data,\n      gap,\n      scaleValues\n    };\n    var delta = e.pageX - brushMoveStartX;\n    if (delta > 0) {\n      delta = Math.min(delta, x + width - travellerWidth - prevValue);\n    } else if (delta < 0) {\n      delta = Math.max(delta, x - prevValue);\n    }\n    params[movingTravellerId] = prevValue + delta;\n    var newIndex = getIndex(params);\n    var {\n      startIndex,\n      endIndex\n    } = newIndex;\n    var isFullGap = () => {\n      var lastIndex = data.length - 1;\n      if (movingTravellerId === 'startX' && (endX > startX ? startIndex % gap === 0 : endIndex % gap === 0) || endX < startX && endIndex === lastIndex || movingTravellerId === 'endX' && (endX > startX ? endIndex % gap === 0 : startIndex % gap === 0) || endX > startX && endIndex === lastIndex) {\n        return true;\n      }\n      return false;\n    };\n    this.setState(\n    // @ts-expect-error not sure why typescript is not happy with this, partial update is fine in React\n    {\n      [movingTravellerId]: prevValue + delta,\n      brushMoveStartX: e.pageX\n    }, () => {\n      if (onChange) {\n        if (isFullGap()) {\n          onChange(newIndex);\n        }\n      }\n    });\n  }\n  render() {\n    var {\n      data,\n      className,\n      children,\n      x,\n      y,\n      dy,\n      width,\n      height,\n      alwaysShowText,\n      fill,\n      stroke,\n      startIndex,\n      endIndex,\n      travellerWidth,\n      tickFormatter,\n      dataKey,\n      padding\n    } = this.props;\n    var {\n      startX,\n      endX,\n      isTextActive,\n      isSlideMoving,\n      isTravellerMoving,\n      isTravellerFocused\n    } = this.state;\n    if (!data || !data.length || !isNumber(x) || !isNumber(y) || !isNumber(width) || !isNumber(height) || width <= 0 || height <= 0) {\n      return null;\n    }\n    var layerClass = clsx('recharts-brush', className);\n    var style = generatePrefixStyle('userSelect', 'none');\n    var calculatedY = y + (dy !== null && dy !== void 0 ? dy : 0);\n    return /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass,\n      onMouseLeave: this.handleLeaveWrapper,\n      onTouchMove: this.handleTouchMove,\n      style: style\n    }, /*#__PURE__*/React.createElement(Background, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      fill: fill,\n      stroke: stroke\n    }), /*#__PURE__*/React.createElement(PanoramaContextProvider, null, /*#__PURE__*/React.createElement(Panorama, {\n      x: x,\n      y: calculatedY,\n      width: width,\n      height: height,\n      data: data,\n      padding: padding\n    }, children)), /*#__PURE__*/React.createElement(Slide, {\n      y: calculatedY,\n      height: height,\n      stroke: stroke,\n      travellerWidth: travellerWidth,\n      startX: startX,\n      endX: endX,\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.handleSlideDragStart,\n      onTouchStart: this.handleSlideDragStart\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: startX,\n      id: \"startX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.startX,\n      onTouchStart: this.travellerDragStartHandlers.startX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), /*#__PURE__*/React.createElement(TravellerLayer, {\n      travellerX: endX,\n      id: \"endX\",\n      otherProps: _objectSpread(_objectSpread({}, this.props), {}, {\n        y: calculatedY\n      }),\n      onMouseEnter: this.handleEnterSlideOrTraveller,\n      onMouseLeave: this.handleLeaveSlideOrTraveller,\n      onMouseDown: this.travellerDragStartHandlers.endX,\n      onTouchStart: this.travellerDragStartHandlers.endX,\n      onTravellerMoveKeyboard: this.handleTravellerMoveKeyboard,\n      onFocus: () => {\n        this.setState({\n          isTravellerFocused: true\n        });\n      },\n      onBlur: () => {\n        this.setState({\n          isTravellerFocused: false\n        });\n      }\n    }), (isTextActive || isSlideMoving || isTravellerMoving || isTravellerFocused || alwaysShowText) && /*#__PURE__*/React.createElement(BrushText, {\n      startIndex: startIndex,\n      endIndex: endIndex,\n      y: calculatedY,\n      height: height,\n      travellerWidth: travellerWidth,\n      stroke: stroke,\n      tickFormatter: tickFormatter,\n      dataKey: dataKey,\n      data: data,\n      startX: startX,\n      endX: endX\n    }));\n  }\n}\nfunction BrushInternal(props) {\n  var dispatch = useAppDispatch();\n  var chartData = useChartData();\n  var dataIndexes = useDataIndex();\n  var onChangeFromContext = useContext(BrushUpdateDispatchContext);\n  var onChangeFromProps = props.onChange;\n  var {\n    startIndex: startIndexFromProps,\n    endIndex: endIndexFromProps\n  } = props;\n  useEffect(() => {\n    // start and end index can be controlled from props, and we need them to stay up-to-date in the Redux state too\n    dispatch(setDataStartEndIndexes({\n      startIndex: startIndexFromProps,\n      endIndex: endIndexFromProps\n    }));\n  }, [dispatch, endIndexFromProps, startIndexFromProps]);\n  useBrushChartSynchronisation();\n  var onChange = useCallback(nextState => {\n    if (dataIndexes == null) {\n      return;\n    }\n    var {\n      startIndex,\n      endIndex\n    } = dataIndexes;\n    if (nextState.startIndex !== startIndex || nextState.endIndex !== endIndex) {\n      onChangeFromContext === null || onChangeFromContext === void 0 || onChangeFromContext(nextState);\n      onChangeFromProps === null || onChangeFromProps === void 0 || onChangeFromProps(nextState);\n      dispatch(setDataStartEndIndexes(nextState));\n    }\n  }, [onChangeFromProps, onChangeFromContext, dispatch, dataIndexes]);\n  var brushDimensions = useAppSelector(selectBrushDimensions);\n  if (brushDimensions == null || dataIndexes == null || chartData == null || !chartData.length) {\n    return null;\n  }\n  var {\n    startIndex,\n    endIndex\n  } = dataIndexes;\n  var {\n    x,\n    y,\n    width\n  } = brushDimensions;\n  var contextProperties = {\n    data: chartData,\n    x,\n    y,\n    width,\n    startIndex,\n    endIndex,\n    onChange\n  };\n  return /*#__PURE__*/React.createElement(BrushWithState, _extends({}, props, contextProperties, {\n    startIndexControlledFromProps: startIndexFromProps !== null && startIndexFromProps !== void 0 ? startIndexFromProps : undefined,\n    endIndexControlledFromProps: endIndexFromProps !== null && endIndexFromProps !== void 0 ? endIndexFromProps : undefined\n  }));\n}\nfunction BrushSettingsDispatcher(props) {\n  var dispatch = useAppDispatch();\n  useEffect(() => {\n    dispatch(setBrushSettings(props));\n    return () => {\n      dispatch(setBrushSettings(null));\n    };\n  }, [dispatch, props]);\n  return null;\n}\nexport var defaultBrushProps = {\n  height: 40,\n  travellerWidth: 5,\n  gap: 1,\n  fill: '#fff',\n  stroke: '#666',\n  padding: {\n    top: 1,\n    right: 1,\n    bottom: 1,\n    left: 1\n  },\n  leaveTimeOut: 1000,\n  alwaysShowText: false\n};\nexport function Brush(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultBrushProps);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(BrushSettingsDispatcher, {\n    height: props.height,\n    x: props.x,\n    y: props.y,\n    width: props.width,\n    padding: props.padding\n  }), /*#__PURE__*/React.createElement(BrushInternal, props));\n}\nBrush.displayName = 'Brush';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}