{"ast":null,"code":"var _excluded=[\"sourceX\",\"sourceY\",\"sourceControlX\",\"targetX\",\"targetY\",\"targetControlX\",\"linkWidth\"],_excluded2=[\"className\",\"style\",\"children\"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r]);}return n;},_extends.apply(null,arguments);}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o]);}return i;}function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n];}return t;}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable;})),t.push.apply(t,o);}return t;}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));});}return e;}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e;}function _toPropertyKey(t){var i=_toPrimitive(t,\"string\");return\"symbol\"==typeof i?i:i+\"\";}function _toPrimitive(t,r){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||\"default\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(\"string\"===r?String:Number)(t);}import*as React from'react';import{useCallback,useMemo,useState}from'react';import maxBy from'es-toolkit/compat/maxBy';import sumBy from'es-toolkit/compat/sumBy';import get from'es-toolkit/compat/get';import{Surface}from'../container/Surface';import{Layer}from'../container/Layer';import{Rectangle}from'../shape/Rectangle';import{getValueByDataKey}from'../util/ChartUtils';import{ReportChartMargin,ReportChartSize,useChartHeight,useChartWidth}from'../context/chartLayoutContext';import{TooltipPortalContext}from'../context/tooltipPortalContext';import{RechartsWrapper}from'./RechartsWrapper';import{RechartsStoreProvider}from'../state/RechartsStoreProvider';import{useAppDispatch}from'../state/hooks';import{mouseLeaveItem,setActiveClickItemIndex,setActiveMouseOverItemIndex}from'../state/tooltipSlice';import{SetTooltipEntrySettings}from'../state/SetTooltipEntrySettings';import{SetComputedData}from'../context/chartDataContext';import{svgPropertiesNoEvents,svgPropertiesNoEventsFromUnknown}from'../util/svgPropertiesNoEvents';import{resolveDefaultProps}from'../util/resolveDefaultProps';import{isPositiveNumber}from'../util/isWellBehavedNumber';var interpolationGenerator=(a,b)=>{var ka=+a;var kb=b-ka;return t=>ka+kb*t;};var centerY=node=>node.y+node.dy/2;var getValue=entry=>entry&&entry.value||0;var getSumOfIds=(links,ids)=>ids.reduce((result,id)=>result+getValue(links[id]),0);var getSumWithWeightedSource=(tree,links,ids)=>ids.reduce((result,id)=>{var link=links[id];var sourceNode=tree[link.source];return result+centerY(sourceNode)*getValue(links[id]);},0);var getSumWithWeightedTarget=(tree,links,ids)=>ids.reduce((result,id)=>{var link=links[id];var targetNode=tree[link.target];return result+centerY(targetNode)*getValue(links[id]);},0);var ascendingY=(a,b)=>a.y-b.y;var searchTargetsAndSources=(links,id)=>{var sourceNodes=[];var sourceLinks=[];var targetNodes=[];var targetLinks=[];for(var i=0,len=links.length;i<len;i++){var link=links[i];if(link.source===id){targetNodes.push(link.target);targetLinks.push(i);}if(link.target===id){sourceNodes.push(link.source);sourceLinks.push(i);}}return{sourceNodes,sourceLinks,targetLinks,targetNodes};};var updateDepthOfTargets=(tree,curNode)=>{var{targetNodes}=curNode;for(var i=0,len=targetNodes.length;i<len;i++){var target=tree[targetNodes[i]];if(target){target.depth=Math.max(curNode.depth+1,target.depth);updateDepthOfTargets(tree,target);}}};var getNodesTree=(_ref,width,nodeWidth,align)=>{var _maxBy$depth,_maxBy;var{nodes,links}=_ref;var tree=nodes.map((entry,index)=>{var result=searchTargetsAndSources(links,index);return _objectSpread(_objectSpread(_objectSpread({},entry),result),{},{value:Math.max(getSumOfIds(links,result.sourceLinks),getSumOfIds(links,result.targetLinks)),depth:0});});for(var i=0,len=tree.length;i<len;i++){var node=tree[i];if(!node.sourceNodes.length){updateDepthOfTargets(tree,node);}}var maxDepth=(_maxBy$depth=(_maxBy=maxBy(tree,entry=>entry.depth))===null||_maxBy===void 0?void 0:_maxBy.depth)!==null&&_maxBy$depth!==void 0?_maxBy$depth:0;if(maxDepth>=1){var childWidth=(width-nodeWidth)/maxDepth;for(var _i=0,_len=tree.length;_i<_len;_i++){var _node=tree[_i];if(!_node.targetNodes.length){if(align==='justify'){_node.depth=maxDepth;}}_node.x=_node.depth*childWidth;_node.dx=nodeWidth;}}return{tree,maxDepth};};var getDepthTree=tree=>{var result=[];for(var i=0,len=tree.length;i<len;i++){var node=tree[i];if(!result[node.depth]){result[node.depth]=[];}result[node.depth].push(node);}return result;};var updateYOfTree=(depthTree,height,nodePadding,links,verticalAlign)=>{var yRatio=Math.min(...depthTree.map(nodes=>(height-(nodes.length-1)*nodePadding)/sumBy(nodes,getValue)));for(var d=0,maxDepth=depthTree.length;d<maxDepth;d++){var nodes=depthTree[d];if(verticalAlign==='top'){var currentY=0;for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];node.dy=node.value*yRatio;node.y=currentY;currentY+=node.dy+nodePadding;}}else{for(var _i2=0,_len2=nodes.length;_i2<_len2;_i2++){var _node2=nodes[_i2];_node2.y=_i2;_node2.dy=_node2.value*yRatio;}}}return links.map(link=>_objectSpread(_objectSpread({},link),{},{dy:getValue(link)*yRatio}));};var resolveCollisions=function resolveCollisions(depthTree,height,nodePadding){var sort=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;for(var i=0,len=depthTree.length;i<len;i++){var nodes=depthTree[i];var n=nodes.length;// Sort by the value of y\nif(sort){nodes.sort(ascendingY);}var y0=0;for(var j=0;j<n;j++){var node=nodes[j];var dy=y0-node.y;if(dy>0){node.y+=dy;}y0=node.y+node.dy+nodePadding;}y0=height+nodePadding;for(var _j=n-1;_j>=0;_j--){var _node3=nodes[_j];var _dy=_node3.y+_node3.dy+nodePadding-y0;if(_dy>0){_node3.y-=_dy;y0=_node3.y;}else{break;}}}};var relaxLeftToRight=(tree,depthTree,links,alpha)=>{for(var i=0,maxDepth=depthTree.length;i<maxDepth;i++){var nodes=depthTree[i];for(var j=0,len=nodes.length;j<len;j++){var node=nodes[j];if(node.sourceLinks.length){var sourceSum=getSumOfIds(links,node.sourceLinks);var weightedSum=getSumWithWeightedSource(tree,links,node.sourceLinks);var y=weightedSum/sourceSum;node.y+=(y-centerY(node))*alpha;}}}};var relaxRightToLeft=(tree,depthTree,links,alpha)=>{for(var i=depthTree.length-1;i>=0;i--){var nodes=depthTree[i];for(var j=0,len=nodes.length;j<len;j++){var node=nodes[j];if(node.targetLinks.length){var targetSum=getSumOfIds(links,node.targetLinks);var weightedSum=getSumWithWeightedTarget(tree,links,node.targetLinks);var y=weightedSum/targetSum;node.y+=(y-centerY(node))*alpha;}}}};var updateYOfLinks=(tree,links)=>{for(var i=0,len=tree.length;i<len;i++){var node=tree[i];var sy=0;var ty=0;node.targetLinks.sort((a,b)=>tree[links[a].target].y-tree[links[b].target].y);node.sourceLinks.sort((a,b)=>tree[links[a].source].y-tree[links[b].source].y);for(var j=0,tLen=node.targetLinks.length;j<tLen;j++){var link=links[node.targetLinks[j]];if(link){// @ts-expect-error we should refactor this to immutable\nlink.sy=sy;sy+=link.dy;}}for(var _j2=0,sLen=node.sourceLinks.length;_j2<sLen;_j2++){var _link=links[node.sourceLinks[_j2]];if(_link){// @ts-expect-error we should refactor this to immutable\n_link.ty=ty;ty+=_link.dy;}}}};var computeData=_ref2=>{var{data,width,height,iterations,nodeWidth,nodePadding,sort,verticalAlign,align}=_ref2;var{links}=data;var{tree}=getNodesTree(data,width,nodeWidth,align);var depthTree=getDepthTree(tree);var linksWithDy=updateYOfTree(depthTree,height,nodePadding,links,verticalAlign);resolveCollisions(depthTree,height,nodePadding,sort);if(verticalAlign==='justify'){var alpha=1;for(var i=1;i<=iterations;i++){relaxRightToLeft(tree,depthTree,linksWithDy,alpha*=0.99);resolveCollisions(depthTree,height,nodePadding,sort);relaxLeftToRight(tree,depthTree,linksWithDy,alpha);resolveCollisions(depthTree,height,nodePadding,sort);}}updateYOfLinks(tree,linksWithDy);// @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\nvar newLinks=linksWithDy;return{nodes:tree,links:newLinks};};var getNodeCoordinateOfTooltip=item=>{return{x:+item.x+ +item.width/2,y:+item.y+ +item.height/2};};var getLinkCoordinateOfTooltip=item=>{return'sourceX'in item?{x:(item.sourceX+item.targetX)/2,y:(item.sourceY+item.targetY)/2}:undefined;};var getPayloadOfTooltip=(item,type,nameKey)=>{var{payload}=item;if(type==='node'){return{payload,name:getValueByDataKey(payload,nameKey,''),value:getValueByDataKey(payload,'value')};}if('source'in payload&&payload.source&&payload.target){var sourceName=getValueByDataKey(payload.source,nameKey,'');var targetName=getValueByDataKey(payload.target,nameKey,'');return{payload,name:\"\".concat(sourceName,\" - \").concat(targetName),value:getValueByDataKey(payload,'value')};}return undefined;};export var sankeyPayloadSearcher=(_,activeIndex,computedData,nameKey)=>{if(activeIndex==null||typeof activeIndex!=='string'){return undefined;}var splitIndex=activeIndex.split('-');var[targetType,index]=splitIndex;var item=get(computedData,\"\".concat(targetType,\"s[\").concat(index,\"]\"));if(item){var payload=getPayloadOfTooltip(item,targetType,nameKey);return payload;}return undefined;};var options={chartName:'Sankey',defaultTooltipEventType:'item',validateTooltipEventTypes:['item'],tooltipPayloadSearcher:sankeyPayloadSearcher,eventEmitter:undefined};var SetSankeyTooltipEntrySettings=/*#__PURE__*/React.memo(_ref3=>{var{dataKey,nameKey,stroke,strokeWidth,fill,name,data}=_ref3;var tooltipEntrySettings={dataDefinedOnItem:data,positions:undefined,settings:{stroke,strokeWidth,fill,dataKey,name,nameKey,hide:false,type:undefined,color:fill,unit:''}};return/*#__PURE__*/React.createElement(SetTooltipEntrySettings,{tooltipEntrySettings:tooltipEntrySettings});});// TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\nfunction renderLinkItem(option,props){if(/*#__PURE__*/React.isValidElement(option)){return/*#__PURE__*/React.cloneElement(option,props);}if(typeof option==='function'){return option(props);}var{sourceX,sourceY,sourceControlX,targetX,targetY,targetControlX,linkWidth}=props,others=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/React.createElement(\"path\",_extends({className:\"recharts-sankey-link\",d:\"\\n          M\".concat(sourceX,\",\").concat(sourceY,\"\\n          C\").concat(sourceControlX,\",\").concat(sourceY,\" \").concat(targetControlX,\",\").concat(targetY,\" \").concat(targetX,\",\").concat(targetY,\"\\n        \"),fill:\"none\",stroke:\"#333\",strokeWidth:linkWidth,strokeOpacity:\"0.2\"},svgPropertiesNoEvents(others)));}var buildLinkProps=_ref4=>{var{link,nodes,left,top,i,linkContent,linkCurvature}=_ref4;var{sy:sourceRelativeY,ty:targetRelativeY,dy:linkWidth}=link;var sourceNode=nodes[link.source];var targetNode=nodes[link.target];var sourceX=sourceNode.x+sourceNode.dx+left;var targetX=targetNode.x+left;var interpolationFunc=interpolationGenerator(sourceX,targetX);var sourceControlX=interpolationFunc(linkCurvature);var targetControlX=interpolationFunc(1-linkCurvature);var sourceY=sourceNode.y+sourceRelativeY+linkWidth/2+top;var targetY=targetNode.y+targetRelativeY+linkWidth/2+top;var linkProps=_objectSpread({sourceX,// @ts-expect-error the linkContent from below is contributing unknown props\ntargetX,sourceY,// @ts-expect-error the linkContent from below is contributing unknown props\ntargetY,sourceControlX,targetControlX,sourceRelativeY,targetRelativeY,linkWidth,index:i,payload:_objectSpread(_objectSpread({},link),{},{source:sourceNode,target:targetNode})},svgPropertiesNoEventsFromUnknown(linkContent));return linkProps;};function SankeyLinkElement(_ref5){var{props,i,linkContent,onMouseEnter:_onMouseEnter,onMouseLeave:_onMouseLeave,onClick:_onClick,dataKey}=_ref5;var activeCoordinate=getLinkCoordinateOfTooltip(props);var activeIndex=\"link-\".concat(i);var dispatch=useAppDispatch();var events={onMouseEnter:e=>{dispatch(setActiveMouseOverItemIndex({activeIndex,activeDataKey:dataKey,activeCoordinate}));_onMouseEnter(props,e);},onMouseLeave:e=>{dispatch(mouseLeaveItem());_onMouseLeave(props,e);},onClick:e=>{dispatch(setActiveClickItemIndex({activeIndex,activeDataKey:dataKey,activeCoordinate}));_onClick(props,e);}};return/*#__PURE__*/React.createElement(Layer,events,renderLinkItem(linkContent,props));}function AllSankeyLinkElements(_ref6){var{modifiedLinks,links,linkContent,onMouseEnter,onMouseLeave,onClick,dataKey}=_ref6;return/*#__PURE__*/React.createElement(Layer,{className:\"recharts-sankey-links\",key:\"recharts-sankey-links\"},links.map((link,i)=>{var linkProps=modifiedLinks[i];return/*#__PURE__*/React.createElement(SankeyLinkElement,{key:\"link-\".concat(link.source,\"-\").concat(link.target,\"-\").concat(link.value),props:linkProps,linkContent:linkContent,i:i,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onClick:onClick,dataKey:dataKey});}));}function renderNodeItem(option,props){if(/*#__PURE__*/React.isValidElement(option)){return/*#__PURE__*/React.cloneElement(option,props);}if(typeof option==='function'){return option(props);}return(/*#__PURE__*/// @ts-expect-error recharts radius is not compatible with SVG radius\nReact.createElement(Rectangle,_extends({className:\"recharts-sankey-node\",fill:\"#0088fe\",fillOpacity:\"0.8\"},svgPropertiesNoEvents(props))));}var buildNodeProps=_ref7=>{var{node,nodeContent,top,left,i}=_ref7;var{x,y,dx,dy}=node;// @ts-expect-error nodeContent is passing in unknown props\nvar nodeProps=_objectSpread(_objectSpread({},svgPropertiesNoEventsFromUnknown(nodeContent)),{},{x:x+left,y:y+top,width:dx,height:dy,index:i,payload:node});return nodeProps;};function NodeElement(_ref8){var{props,nodeContent,i,onMouseEnter:_onMouseEnter2,onMouseLeave:_onMouseLeave2,onClick:_onClick2,dataKey}=_ref8;var dispatch=useAppDispatch();var activeCoordinate=getNodeCoordinateOfTooltip(props);var activeIndex=\"node-\".concat(i);var events={onMouseEnter:e=>{dispatch(setActiveMouseOverItemIndex({activeIndex,activeDataKey:dataKey,activeCoordinate}));_onMouseEnter2(props,e);},onMouseLeave:e=>{dispatch(mouseLeaveItem());_onMouseLeave2(props,e);},onClick:e=>{dispatch(setActiveClickItemIndex({activeIndex,activeDataKey:dataKey,activeCoordinate}));_onClick2(props,e);}};return/*#__PURE__*/React.createElement(Layer,events,renderNodeItem(nodeContent,props));}function AllNodeElements(_ref9){var{modifiedNodes,nodeContent,onMouseEnter,onMouseLeave,onClick,dataKey}=_ref9;return/*#__PURE__*/React.createElement(Layer,{className:\"recharts-sankey-nodes\",key:\"recharts-sankey-nodes\"},modifiedNodes.map((modifiedNode,i)=>{return/*#__PURE__*/React.createElement(NodeElement,{key:\"node-\".concat(modifiedNode.index,\"-\").concat(modifiedNode.x,\"-\").concat(modifiedNode.y),props:modifiedNode,nodeContent:nodeContent,i:i,onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,onClick:onClick,dataKey:dataKey});}));}var sankeyDefaultProps={nameKey:'name',dataKey:'value',nodePadding:10,nodeWidth:10,linkCurvature:0.5,iterations:32,margin:{top:5,right:5,bottom:5,left:5},sort:true,verticalAlign:'justify',align:'justify'};function SankeyImpl(props){var{className,style,children}=props,others=_objectWithoutProperties(props,_excluded2);var{link,dataKey,node,onMouseEnter,onMouseLeave,onClick,data,iterations,nodeWidth,nodePadding,sort,linkCurvature,margin,verticalAlign,align}=props;var attrs=svgPropertiesNoEvents(others);var width=useChartWidth();var height=useChartHeight();var{links,modifiedLinks,modifiedNodes}=useMemo(()=>{var _margin$left,_margin$right,_margin$top,_margin$bottom;if(!data||!width||!height||width<=0||height<=0){return{nodes:[],links:[],modifiedLinks:[],modifiedNodes:[]};}var contentWidth=width-((_margin$left=margin.left)!==null&&_margin$left!==void 0?_margin$left:0)-((_margin$right=margin.right)!==null&&_margin$right!==void 0?_margin$right:0);var contentHeight=height-((_margin$top=margin.top)!==null&&_margin$top!==void 0?_margin$top:0)-((_margin$bottom=margin.bottom)!==null&&_margin$bottom!==void 0?_margin$bottom:0);var computed=computeData({data,width:contentWidth,height:contentHeight,iterations,nodeWidth,nodePadding,sort,verticalAlign,align});var top=margin.top||0;var left=margin.left||0;var newModifiedLinks=computed.links.map((l,i)=>{return buildLinkProps({link:l,nodes:computed.nodes,i,top,left,linkContent:link,linkCurvature});});var newModifiedNodes=computed.nodes.map((n,i)=>{return buildNodeProps({node:n,nodeContent:node,i,top,left});});return{nodes:computed.nodes,links:computed.links,modifiedLinks:newModifiedLinks,modifiedNodes:newModifiedNodes};},[data,width,height,margin,iterations,nodeWidth,nodePadding,sort,link,node,linkCurvature,align,verticalAlign]);var handleMouseEnter=useCallback((item,type,e)=>{if(onMouseEnter){onMouseEnter(item,type,e);}},[onMouseEnter]);var handleMouseLeave=useCallback((item,type,e)=>{if(onMouseLeave){onMouseLeave(item,type,e);}},[onMouseLeave]);var handleClick=useCallback((item,type,e)=>{if(onClick){onClick(item,type,e);}},[onClick]);if(!isPositiveNumber(width)||!isPositiveNumber(height)||!data||!data.links||!data.nodes){return null;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SetComputedData,{computedData:{links:modifiedLinks,nodes:modifiedNodes}}),/*#__PURE__*/React.createElement(Surface,_extends({},attrs,{width:width,height:height}),children,/*#__PURE__*/React.createElement(AllSankeyLinkElements,{links:links,modifiedLinks:modifiedLinks,linkContent:link,dataKey:dataKey,onMouseEnter:(linkProps,e)=>handleMouseEnter(linkProps,'link',e),onMouseLeave:(linkProps,e)=>handleMouseLeave(linkProps,'link',e),onClick:(linkProps,e)=>handleClick(linkProps,'link',e)}),/*#__PURE__*/React.createElement(AllNodeElements,{modifiedNodes:modifiedNodes,nodeContent:node,dataKey:dataKey,onMouseEnter:(nodeProps,e)=>handleMouseEnter(nodeProps,'node',e),onMouseLeave:(nodeProps,e)=>handleMouseLeave(nodeProps,'node',e),onClick:(nodeProps,e)=>handleClick(nodeProps,'node',e)})));}export function Sankey(outsideProps){var props=resolveDefaultProps(outsideProps,sankeyDefaultProps);var{width,height,style,className}=props;var[tooltipPortal,setTooltipPortal]=useState(null);return/*#__PURE__*/React.createElement(RechartsStoreProvider,{preloadedState:{options},reduxStoreName:className!==null&&className!==void 0?className:'Sankey'},/*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings,{dataKey:props.dataKey,nameKey:props.nameKey,stroke:props.stroke,strokeWidth:props.strokeWidth,fill:props.fill,name:props.name,data:props.data}),/*#__PURE__*/React.createElement(ReportChartSize,{width:width,height:height}),/*#__PURE__*/React.createElement(ReportChartMargin,{margin:props.margin}),/*#__PURE__*/React.createElement(RechartsWrapper,{className:className,style:style,width:width,height:height/*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */,responsive:false,ref:node=>{if(node&&!tooltipPortal){setTooltipPortal(node);}},onMouseEnter:undefined,onMouseLeave:undefined,onClick:undefined,onMouseMove:undefined,onMouseDown:undefined,onMouseUp:undefined,onContextMenu:undefined,onDoubleClick:undefined,onTouchStart:undefined,onTouchMove:undefined,onTouchEnd:undefined},/*#__PURE__*/React.createElement(TooltipPortalContext.Provider,{value:tooltipPortal},/*#__PURE__*/React.createElement(SankeyImpl,props))));}Sankey.displayName='Sankey';","map":{"version":3,"names":["_excluded","_excluded2","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","ownKeys","keys","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","useCallback","useMemo","useState","maxBy","sumBy","get","Surface","Layer","Rectangle","getValueByDataKey","ReportChartMargin","ReportChartSize","useChartHeight","useChartWidth","TooltipPortalContext","RechartsWrapper","RechartsStoreProvider","useAppDispatch","mouseLeaveItem","setActiveClickItemIndex","setActiveMouseOverItemIndex","SetTooltipEntrySettings","SetComputedData","svgPropertiesNoEvents","svgPropertiesNoEventsFromUnknown","resolveDefaultProps","isPositiveNumber","interpolationGenerator","a","b","ka","kb","centerY","node","y","dy","getValue","entry","getSumOfIds","links","ids","reduce","result","id","getSumWithWeightedSource","tree","link","sourceNode","source","getSumWithWeightedTarget","targetNode","target","ascendingY","searchTargetsAndSources","sourceNodes","sourceLinks","targetNodes","targetLinks","len","updateDepthOfTargets","curNode","depth","Math","max","getNodesTree","_ref","width","nodeWidth","align","_maxBy$depth","_maxBy","nodes","map","index","maxDepth","childWidth","_i","_len","_node","x","dx","getDepthTree","updateYOfTree","depthTree","height","nodePadding","verticalAlign","yRatio","min","d","currentY","_i2","_len2","_node2","resolveCollisions","sort","undefined","y0","j","_j","_node3","_dy","relaxLeftToRight","alpha","sourceSum","weightedSum","relaxRightToLeft","targetSum","updateYOfLinks","sy","ty","tLen","_j2","sLen","_link","computeData","_ref2","data","iterations","linksWithDy","newLinks","getNodeCoordinateOfTooltip","item","getLinkCoordinateOfTooltip","sourceX","targetX","sourceY","targetY","getPayloadOfTooltip","type","nameKey","payload","name","sourceName","targetName","concat","sankeyPayloadSearcher","_","activeIndex","computedData","splitIndex","split","targetType","options","chartName","defaultTooltipEventType","validateTooltipEventTypes","tooltipPayloadSearcher","eventEmitter","SetSankeyTooltipEntrySettings","memo","_ref3","dataKey","stroke","strokeWidth","fill","tooltipEntrySettings","dataDefinedOnItem","positions","settings","hide","color","unit","createElement","renderLinkItem","option","props","isValidElement","cloneElement","sourceControlX","targetControlX","linkWidth","others","className","strokeOpacity","buildLinkProps","_ref4","left","top","linkContent","linkCurvature","sourceRelativeY","targetRelativeY","interpolationFunc","linkProps","SankeyLinkElement","_ref5","onMouseEnter","_onMouseEnter","onMouseLeave","_onMouseLeave","onClick","_onClick","activeCoordinate","dispatch","events","activeDataKey","AllSankeyLinkElements","_ref6","modifiedLinks","key","renderNodeItem","fillOpacity","buildNodeProps","_ref7","nodeContent","nodeProps","NodeElement","_ref8","_onMouseEnter2","_onMouseLeave2","_onClick2","AllNodeElements","_ref9","modifiedNodes","modifiedNode","sankeyDefaultProps","margin","right","bottom","SankeyImpl","style","children","attrs","_margin$left","_margin$right","_margin$top","_margin$bottom","contentWidth","contentHeight","computed","newModifiedLinks","l","newModifiedNodes","handleMouseEnter","handleMouseLeave","handleClick","Fragment","Sankey","outsideProps","tooltipPortal","setTooltipPortal","preloadedState","reduxStoreName","responsive","ref","onMouseMove","onMouseDown","onMouseUp","onContextMenu","onDoubleClick","onTouchStart","onTouchMove","onTouchEnd","Provider","displayName"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/node_modules/recharts/es6/chart/Sankey.js"],"sourcesContent":["var _excluded = [\"sourceX\", \"sourceY\", \"sourceControlX\", \"targetX\", \"targetY\", \"targetControlX\", \"linkWidth\"],\n  _excluded2 = [\"className\", \"style\", \"children\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport maxBy from 'es-toolkit/compat/maxBy';\nimport sumBy from 'es-toolkit/compat/sumBy';\nimport get from 'es-toolkit/compat/get';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../shape/Rectangle';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { ReportChartMargin, ReportChartSize, useChartHeight, useChartWidth } from '../context/chartLayoutContext';\nimport { TooltipPortalContext } from '../context/tooltipPortalContext';\nimport { RechartsWrapper } from './RechartsWrapper';\nimport { RechartsStoreProvider } from '../state/RechartsStoreProvider';\nimport { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetComputedData } from '../context/chartDataContext';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isPositiveNumber } from '../util/isWellBehavedNumber';\nvar interpolationGenerator = (a, b) => {\n  var ka = +a;\n  var kb = b - ka;\n  return t => ka + kb * t;\n};\nvar centerY = node => node.y + node.dy / 2;\nvar getValue = entry => entry && entry.value || 0;\nvar getSumOfIds = (links, ids) => ids.reduce((result, id) => result + getValue(links[id]), 0);\nvar getSumWithWeightedSource = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var sourceNode = tree[link.source];\n  return result + centerY(sourceNode) * getValue(links[id]);\n}, 0);\nvar getSumWithWeightedTarget = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var targetNode = tree[link.target];\n  return result + centerY(targetNode) * getValue(links[id]);\n}, 0);\nvar ascendingY = (a, b) => a.y - b.y;\nvar searchTargetsAndSources = (links, id) => {\n  var sourceNodes = [];\n  var sourceLinks = [];\n  var targetNodes = [];\n  var targetLinks = [];\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i];\n    if (link.source === id) {\n      targetNodes.push(link.target);\n      targetLinks.push(i);\n    }\n    if (link.target === id) {\n      sourceNodes.push(link.source);\n      sourceLinks.push(i);\n    }\n  }\n  return {\n    sourceNodes,\n    sourceLinks,\n    targetLinks,\n    targetNodes\n  };\n};\nvar updateDepthOfTargets = (tree, curNode) => {\n  var {\n    targetNodes\n  } = curNode;\n  for (var i = 0, len = targetNodes.length; i < len; i++) {\n    var target = tree[targetNodes[i]];\n    if (target) {\n      target.depth = Math.max(curNode.depth + 1, target.depth);\n      updateDepthOfTargets(tree, target);\n    }\n  }\n};\nvar getNodesTree = (_ref, width, nodeWidth, align) => {\n  var _maxBy$depth, _maxBy;\n  var {\n    nodes,\n    links\n  } = _ref;\n  var tree = nodes.map((entry, index) => {\n    var result = searchTargetsAndSources(links, index);\n    return _objectSpread(_objectSpread(_objectSpread({}, entry), result), {}, {\n      value: Math.max(getSumOfIds(links, result.sourceLinks), getSumOfIds(links, result.targetLinks)),\n      depth: 0\n    });\n  });\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!node.sourceNodes.length) {\n      updateDepthOfTargets(tree, node);\n    }\n  }\n  var maxDepth = (_maxBy$depth = (_maxBy = maxBy(tree, entry => entry.depth)) === null || _maxBy === void 0 ? void 0 : _maxBy.depth) !== null && _maxBy$depth !== void 0 ? _maxBy$depth : 0;\n  if (maxDepth >= 1) {\n    var childWidth = (width - nodeWidth) / maxDepth;\n    for (var _i = 0, _len = tree.length; _i < _len; _i++) {\n      var _node = tree[_i];\n      if (!_node.targetNodes.length) {\n        if (align === 'justify') {\n          _node.depth = maxDepth;\n        }\n      }\n      _node.x = _node.depth * childWidth;\n      _node.dx = nodeWidth;\n    }\n  }\n  return {\n    tree,\n    maxDepth\n  };\n};\nvar getDepthTree = tree => {\n  var result = [];\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!result[node.depth]) {\n      result[node.depth] = [];\n    }\n    result[node.depth].push(node);\n  }\n  return result;\n};\nvar updateYOfTree = (depthTree, height, nodePadding, links, verticalAlign) => {\n  var yRatio = Math.min(...depthTree.map(nodes => (height - (nodes.length - 1) * nodePadding) / sumBy(nodes, getValue)));\n  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {\n    var nodes = depthTree[d];\n    if (verticalAlign === 'top') {\n      var currentY = 0;\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        node.dy = node.value * yRatio;\n        node.y = currentY;\n        currentY += node.dy + nodePadding;\n      }\n    } else {\n      for (var _i2 = 0, _len2 = nodes.length; _i2 < _len2; _i2++) {\n        var _node2 = nodes[_i2];\n        _node2.y = _i2;\n        _node2.dy = _node2.value * yRatio;\n      }\n    }\n  }\n  return links.map(link => _objectSpread(_objectSpread({}, link), {}, {\n    dy: getValue(link) * yRatio\n  }));\n};\nvar resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {\n  var sort = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  for (var i = 0, len = depthTree.length; i < len; i++) {\n    var nodes = depthTree[i];\n    var n = nodes.length;\n\n    // Sort by the value of y\n    if (sort) {\n      nodes.sort(ascendingY);\n    }\n    var y0 = 0;\n    for (var j = 0; j < n; j++) {\n      var node = nodes[j];\n      var dy = y0 - node.y;\n      if (dy > 0) {\n        node.y += dy;\n      }\n      y0 = node.y + node.dy + nodePadding;\n    }\n    y0 = height + nodePadding;\n    for (var _j = n - 1; _j >= 0; _j--) {\n      var _node3 = nodes[_j];\n      var _dy = _node3.y + _node3.dy + nodePadding - y0;\n      if (_dy > 0) {\n        _node3.y -= _dy;\n        y0 = _node3.y;\n      } else {\n        break;\n      }\n    }\n  }\n};\nvar relaxLeftToRight = (tree, depthTree, links, alpha) => {\n  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.sourceLinks.length) {\n        var sourceSum = getSumOfIds(links, node.sourceLinks);\n        var weightedSum = getSumWithWeightedSource(tree, links, node.sourceLinks);\n        var y = weightedSum / sourceSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar relaxRightToLeft = (tree, depthTree, links, alpha) => {\n  for (var i = depthTree.length - 1; i >= 0; i--) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.targetLinks.length) {\n        var targetSum = getSumOfIds(links, node.targetLinks);\n        var weightedSum = getSumWithWeightedTarget(tree, links, node.targetLinks);\n        var y = weightedSum / targetSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar updateYOfLinks = (tree, links) => {\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    var sy = 0;\n    var ty = 0;\n    node.targetLinks.sort((a, b) => tree[links[a].target].y - tree[links[b].target].y);\n    node.sourceLinks.sort((a, b) => tree[links[a].source].y - tree[links[b].source].y);\n    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {\n      var link = links[node.targetLinks[j]];\n      if (link) {\n        // @ts-expect-error we should refactor this to immutable\n        link.sy = sy;\n        sy += link.dy;\n      }\n    }\n    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {\n      var _link = links[node.sourceLinks[_j2]];\n      if (_link) {\n        // @ts-expect-error we should refactor this to immutable\n        _link.ty = ty;\n        ty += _link.dy;\n      }\n    }\n  }\n};\nvar computeData = _ref2 => {\n  var {\n    data,\n    width,\n    height,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    verticalAlign,\n    align\n  } = _ref2;\n  var {\n    links\n  } = data;\n  var {\n    tree\n  } = getNodesTree(data, width, nodeWidth, align);\n  var depthTree = getDepthTree(tree);\n  var linksWithDy = updateYOfTree(depthTree, height, nodePadding, links, verticalAlign);\n  resolveCollisions(depthTree, height, nodePadding, sort);\n  if (verticalAlign === 'justify') {\n    var alpha = 1;\n    for (var i = 1; i <= iterations; i++) {\n      relaxRightToLeft(tree, depthTree, linksWithDy, alpha *= 0.99);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n      relaxLeftToRight(tree, depthTree, linksWithDy, alpha);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n    }\n  }\n  updateYOfLinks(tree, linksWithDy);\n  // @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\n  var newLinks = linksWithDy;\n  return {\n    nodes: tree,\n    links: newLinks\n  };\n};\nvar getNodeCoordinateOfTooltip = item => {\n  return {\n    x: +item.x + +item.width / 2,\n    y: +item.y + +item.height / 2\n  };\n};\nvar getLinkCoordinateOfTooltip = item => {\n  return 'sourceX' in item ? {\n    x: (item.sourceX + item.targetX) / 2,\n    y: (item.sourceY + item.targetY) / 2\n  } : undefined;\n};\nvar getPayloadOfTooltip = (item, type, nameKey) => {\n  var {\n    payload\n  } = item;\n  if (type === 'node') {\n    return {\n      payload,\n      name: getValueByDataKey(payload, nameKey, ''),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  if ('source' in payload && payload.source && payload.target) {\n    var sourceName = getValueByDataKey(payload.source, nameKey, '');\n    var targetName = getValueByDataKey(payload.target, nameKey, '');\n    return {\n      payload,\n      name: \"\".concat(sourceName, \" - \").concat(targetName),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  return undefined;\n};\nexport var sankeyPayloadSearcher = (_, activeIndex, computedData, nameKey) => {\n  if (activeIndex == null || typeof activeIndex !== 'string') {\n    return undefined;\n  }\n  var splitIndex = activeIndex.split('-');\n  var [targetType, index] = splitIndex;\n  var item = get(computedData, \"\".concat(targetType, \"s[\").concat(index, \"]\"));\n  if (item) {\n    var payload = getPayloadOfTooltip(item, targetType, nameKey);\n    return payload;\n  }\n  return undefined;\n};\nvar options = {\n  chartName: 'Sankey',\n  defaultTooltipEventType: 'item',\n  validateTooltipEventTypes: ['item'],\n  tooltipPayloadSearcher: sankeyPayloadSearcher,\n  eventEmitter: undefined\n};\nvar SetSankeyTooltipEntrySettings = /*#__PURE__*/React.memo(_ref3 => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    data\n  } = _ref3;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide: false,\n      type: undefined,\n      color: fill,\n      unit: ''\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\n\n// TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\n\nfunction renderLinkItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  var {\n      sourceX,\n      sourceY,\n      sourceControlX,\n      targetX,\n      targetY,\n      targetControlX,\n      linkWidth\n    } = props,\n    others = _objectWithoutProperties(props, _excluded);\n  return /*#__PURE__*/React.createElement(\"path\", _extends({\n    className: \"recharts-sankey-link\",\n    d: \"\\n          M\".concat(sourceX, \",\").concat(sourceY, \"\\n          C\").concat(sourceControlX, \",\").concat(sourceY, \" \").concat(targetControlX, \",\").concat(targetY, \" \").concat(targetX, \",\").concat(targetY, \"\\n        \"),\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: linkWidth,\n    strokeOpacity: \"0.2\"\n  }, svgPropertiesNoEvents(others)));\n}\nvar buildLinkProps = _ref4 => {\n  var {\n    link,\n    nodes,\n    left,\n    top,\n    i,\n    linkContent,\n    linkCurvature\n  } = _ref4;\n  var {\n    sy: sourceRelativeY,\n    ty: targetRelativeY,\n    dy: linkWidth\n  } = link;\n  var sourceNode = nodes[link.source];\n  var targetNode = nodes[link.target];\n  var sourceX = sourceNode.x + sourceNode.dx + left;\n  var targetX = targetNode.x + left;\n  var interpolationFunc = interpolationGenerator(sourceX, targetX);\n  var sourceControlX = interpolationFunc(linkCurvature);\n  var targetControlX = interpolationFunc(1 - linkCurvature);\n  var sourceY = sourceNode.y + sourceRelativeY + linkWidth / 2 + top;\n  var targetY = targetNode.y + targetRelativeY + linkWidth / 2 + top;\n  var linkProps = _objectSpread({\n    sourceX,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetX,\n    sourceY,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetY,\n    sourceControlX,\n    targetControlX,\n    sourceRelativeY,\n    targetRelativeY,\n    linkWidth,\n    index: i,\n    payload: _objectSpread(_objectSpread({}, link), {}, {\n      source: sourceNode,\n      target: targetNode\n    })\n  }, svgPropertiesNoEventsFromUnknown(linkContent));\n  return linkProps;\n};\nfunction SankeyLinkElement(_ref5) {\n  var {\n    props,\n    i,\n    linkContent,\n    onMouseEnter: _onMouseEnter,\n    onMouseLeave: _onMouseLeave,\n    onClick: _onClick,\n    dataKey\n  } = _ref5;\n  var activeCoordinate = getLinkCoordinateOfTooltip(props);\n  var activeIndex = \"link-\".concat(i);\n  var dispatch = useAppDispatch();\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderLinkItem(linkContent, props));\n}\nfunction AllSankeyLinkElements(_ref6) {\n  var {\n    modifiedLinks,\n    links,\n    linkContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-links\",\n    key: \"recharts-sankey-links\"\n  }, links.map((link, i) => {\n    var linkProps = modifiedLinks[i];\n    return /*#__PURE__*/React.createElement(SankeyLinkElement, {\n      key: \"link-\".concat(link.source, \"-\").concat(link.target, \"-\").concat(link.value),\n      props: linkProps,\n      linkContent: linkContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nfunction renderNodeItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  return (\n    /*#__PURE__*/\n    // @ts-expect-error recharts radius is not compatible with SVG radius\n    React.createElement(Rectangle, _extends({\n      className: \"recharts-sankey-node\",\n      fill: \"#0088fe\",\n      fillOpacity: \"0.8\"\n    }, svgPropertiesNoEvents(props)))\n  );\n}\nvar buildNodeProps = _ref7 => {\n  var {\n    node,\n    nodeContent,\n    top,\n    left,\n    i\n  } = _ref7;\n  var {\n    x,\n    y,\n    dx,\n    dy\n  } = node;\n  // @ts-expect-error nodeContent is passing in unknown props\n  var nodeProps = _objectSpread(_objectSpread({}, svgPropertiesNoEventsFromUnknown(nodeContent)), {}, {\n    x: x + left,\n    y: y + top,\n    width: dx,\n    height: dy,\n    index: i,\n    payload: node\n  });\n  return nodeProps;\n};\nfunction NodeElement(_ref8) {\n  var {\n    props,\n    nodeContent,\n    i,\n    onMouseEnter: _onMouseEnter2,\n    onMouseLeave: _onMouseLeave2,\n    onClick: _onClick2,\n    dataKey\n  } = _ref8;\n  var dispatch = useAppDispatch();\n  var activeCoordinate = getNodeCoordinateOfTooltip(props);\n  var activeIndex = \"node-\".concat(i);\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter2(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave2(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick2(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderNodeItem(nodeContent, props));\n}\nfunction AllNodeElements(_ref9) {\n  var {\n    modifiedNodes,\n    nodeContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref9;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-nodes\",\n    key: \"recharts-sankey-nodes\"\n  }, modifiedNodes.map((modifiedNode, i) => {\n    return /*#__PURE__*/React.createElement(NodeElement, {\n      key: \"node-\".concat(modifiedNode.index, \"-\").concat(modifiedNode.x, \"-\").concat(modifiedNode.y),\n      props: modifiedNode,\n      nodeContent: nodeContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nvar sankeyDefaultProps = {\n  nameKey: 'name',\n  dataKey: 'value',\n  nodePadding: 10,\n  nodeWidth: 10,\n  linkCurvature: 0.5,\n  iterations: 32,\n  margin: {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5\n  },\n  sort: true,\n  verticalAlign: 'justify',\n  align: 'justify'\n};\nfunction SankeyImpl(props) {\n  var {\n      className,\n      style,\n      children\n    } = props,\n    others = _objectWithoutProperties(props, _excluded2);\n  var {\n    link,\n    dataKey,\n    node,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    data,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    linkCurvature,\n    margin,\n    verticalAlign,\n    align\n  } = props;\n  var attrs = svgPropertiesNoEvents(others);\n  var width = useChartWidth();\n  var height = useChartHeight();\n  var {\n    links,\n    modifiedLinks,\n    modifiedNodes\n  } = useMemo(() => {\n    var _margin$left, _margin$right, _margin$top, _margin$bottom;\n    if (!data || !width || !height || width <= 0 || height <= 0) {\n      return {\n        nodes: [],\n        links: [],\n        modifiedLinks: [],\n        modifiedNodes: []\n      };\n    }\n    var contentWidth = width - ((_margin$left = margin.left) !== null && _margin$left !== void 0 ? _margin$left : 0) - ((_margin$right = margin.right) !== null && _margin$right !== void 0 ? _margin$right : 0);\n    var contentHeight = height - ((_margin$top = margin.top) !== null && _margin$top !== void 0 ? _margin$top : 0) - ((_margin$bottom = margin.bottom) !== null && _margin$bottom !== void 0 ? _margin$bottom : 0);\n    var computed = computeData({\n      data,\n      width: contentWidth,\n      height: contentHeight,\n      iterations,\n      nodeWidth,\n      nodePadding,\n      sort,\n      verticalAlign,\n      align\n    });\n    var top = margin.top || 0;\n    var left = margin.left || 0;\n    var newModifiedLinks = computed.links.map((l, i) => {\n      return buildLinkProps({\n        link: l,\n        nodes: computed.nodes,\n        i,\n        top,\n        left,\n        linkContent: link,\n        linkCurvature\n      });\n    });\n    var newModifiedNodes = computed.nodes.map((n, i) => {\n      return buildNodeProps({\n        node: n,\n        nodeContent: node,\n        i,\n        top,\n        left\n      });\n    });\n    return {\n      nodes: computed.nodes,\n      links: computed.links,\n      modifiedLinks: newModifiedLinks,\n      modifiedNodes: newModifiedNodes\n    };\n  }, [data, width, height, margin, iterations, nodeWidth, nodePadding, sort, link, node, linkCurvature, align, verticalAlign]);\n  var handleMouseEnter = useCallback((item, type, e) => {\n    if (onMouseEnter) {\n      onMouseEnter(item, type, e);\n    }\n  }, [onMouseEnter]);\n  var handleMouseLeave = useCallback((item, type, e) => {\n    if (onMouseLeave) {\n      onMouseLeave(item, type, e);\n    }\n  }, [onMouseLeave]);\n  var handleClick = useCallback((item, type, e) => {\n    if (onClick) {\n      onClick(item, type, e);\n    }\n  }, [onClick]);\n  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !data || !data.links || !data.nodes) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetComputedData, {\n    computedData: {\n      links: modifiedLinks,\n      nodes: modifiedNodes\n    }\n  }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n    width: width,\n    height: height\n  }), children, /*#__PURE__*/React.createElement(AllSankeyLinkElements, {\n    links: links,\n    modifiedLinks: modifiedLinks,\n    linkContent: link,\n    dataKey: dataKey,\n    onMouseEnter: (linkProps, e) => handleMouseEnter(linkProps, 'link', e),\n    onMouseLeave: (linkProps, e) => handleMouseLeave(linkProps, 'link', e),\n    onClick: (linkProps, e) => handleClick(linkProps, 'link', e)\n  }), /*#__PURE__*/React.createElement(AllNodeElements, {\n    modifiedNodes: modifiedNodes,\n    nodeContent: node,\n    dataKey: dataKey,\n    onMouseEnter: (nodeProps, e) => handleMouseEnter(nodeProps, 'node', e),\n    onMouseLeave: (nodeProps, e) => handleMouseLeave(nodeProps, 'node', e),\n    onClick: (nodeProps, e) => handleClick(nodeProps, 'node', e)\n  })));\n}\nexport function Sankey(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, sankeyDefaultProps);\n  var {\n    width,\n    height,\n    style,\n    className\n  } = props;\n  var [tooltipPortal, setTooltipPortal] = useState(null);\n  return /*#__PURE__*/React.createElement(RechartsStoreProvider, {\n    preloadedState: {\n      options\n    },\n    reduxStoreName: className !== null && className !== void 0 ? className : 'Sankey'\n  }, /*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    data: props.data\n  }), /*#__PURE__*/React.createElement(ReportChartSize, {\n    width: width,\n    height: height\n  }), /*#__PURE__*/React.createElement(ReportChartMargin, {\n    margin: props.margin\n  }), /*#__PURE__*/React.createElement(RechartsWrapper, {\n    className: className,\n    style: style,\n    width: width,\n    height: height\n    /*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */,\n    responsive: false,\n    ref: node => {\n      if (node && !tooltipPortal) {\n        setTooltipPortal(node);\n      }\n    },\n    onMouseEnter: undefined,\n    onMouseLeave: undefined,\n    onClick: undefined,\n    onMouseMove: undefined,\n    onMouseDown: undefined,\n    onMouseUp: undefined,\n    onContextMenu: undefined,\n    onDoubleClick: undefined,\n    onTouchStart: undefined,\n    onTouchMove: undefined,\n    onTouchEnd: undefined\n  }, /*#__PURE__*/React.createElement(TooltipPortalContext.Provider, {\n    value: tooltipPortal\n  }, /*#__PURE__*/React.createElement(SankeyImpl, props))));\n}\nSankey.displayName = 'Sankey';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}