{"ast":null,"code":"import{createAction,createListenerMiddleware}from'@reduxjs/toolkit';import{mouseLeaveChart,setMouseClickAxisIndex,setMouseOverAxisIndex}from'./tooltipSlice';import{selectActivePropsFromChartPointer}from'./selectors/selectActivePropsFromChartPointer';import{selectTooltipEventType}from'./selectors/selectTooltipEventType';import{getChartPointer}from'../util/getChartPointer';export var mouseClickAction=createAction('mouseClick');export var mouseClickMiddleware=createListenerMiddleware();// TODO: there's a bug here when you click the chart the activeIndex resets to zero\nmouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(action,listenerApi)=>{var mousePointer=action.payload;var activeProps=selectActivePropsFromChartPointer(listenerApi.getState(),getChartPointer(mousePointer));if((activeProps===null||activeProps===void 0?void 0:activeProps.activeIndex)!=null){listenerApi.dispatch(setMouseClickAxisIndex({activeIndex:activeProps.activeIndex,activeDataKey:undefined,activeCoordinate:activeProps.activeCoordinate}));}}});export var mouseMoveAction=createAction('mouseMove');export var mouseMoveMiddleware=createListenerMiddleware();/*\n * This single rafId is safe because:\n * 1. Each chart has its own Redux store instance with its own middleware\n * 2. mouseMoveAction only fires from one DOM element (the chart wrapper)\n * 3. Rapid mousemove events from the same element SHOULD debounce - we only care about the latest position\n * This is different from externalEventsMiddleware which handles multiple event types\n * (click, mouseenter, mouseleave, etc.) that should NOT cancel each other.\n */var rafId=null;mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(action,listenerApi)=>{var mousePointer=action.payload;// Cancel any pending animation frame\nif(rafId!==null){cancelAnimationFrame(rafId);}var chartPointer=getChartPointer(mousePointer);// Schedule the dispatch for the next animation frame\nrafId=requestAnimationFrame(()=>{var state=listenerApi.getState();var tooltipEventType=selectTooltipEventType(state,state.tooltip.settings.shared);// this functionality only applies to charts that have axes\nif(tooltipEventType==='axis'){var activeProps=selectActivePropsFromChartPointer(state,chartPointer);if((activeProps===null||activeProps===void 0?void 0:activeProps.activeIndex)!=null){listenerApi.dispatch(setMouseOverAxisIndex({activeIndex:activeProps.activeIndex,activeDataKey:undefined,activeCoordinate:activeProps.activeCoordinate}));}else{// this is needed to clear tooltip state when the mouse moves out of the inRange (svg - offset) function, but not yet out of the svg\nlistenerApi.dispatch(mouseLeaveChart());}}rafId=null;});}});","map":{"version":3,"names":["createAction","createListenerMiddleware","mouseLeaveChart","setMouseClickAxisIndex","setMouseOverAxisIndex","selectActivePropsFromChartPointer","selectTooltipEventType","getChartPointer","mouseClickAction","mouseClickMiddleware","startListening","actionCreator","effect","action","listenerApi","mousePointer","payload","activeProps","getState","activeIndex","dispatch","activeDataKey","undefined","activeCoordinate","mouseMoveAction","mouseMoveMiddleware","rafId","cancelAnimationFrame","chartPointer","requestAnimationFrame","state","tooltipEventType","tooltip","settings","shared"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/node_modules/recharts/es6/state/mouseEventsMiddleware.js"],"sourcesContent":["import { createAction, createListenerMiddleware } from '@reduxjs/toolkit';\nimport { mouseLeaveChart, setMouseClickAxisIndex, setMouseOverAxisIndex } from './tooltipSlice';\nimport { selectActivePropsFromChartPointer } from './selectors/selectActivePropsFromChartPointer';\nimport { selectTooltipEventType } from './selectors/selectTooltipEventType';\nimport { getChartPointer } from '../util/getChartPointer';\nexport var mouseClickAction = createAction('mouseClick');\nexport var mouseClickMiddleware = createListenerMiddleware();\n\n// TODO: there's a bug here when you click the chart the activeIndex resets to zero\nmouseClickMiddleware.startListening({\n  actionCreator: mouseClickAction,\n  effect: (action, listenerApi) => {\n    var mousePointer = action.payload;\n    var activeProps = selectActivePropsFromChartPointer(listenerApi.getState(), getChartPointer(mousePointer));\n    if ((activeProps === null || activeProps === void 0 ? void 0 : activeProps.activeIndex) != null) {\n      listenerApi.dispatch(setMouseClickAxisIndex({\n        activeIndex: activeProps.activeIndex,\n        activeDataKey: undefined,\n        activeCoordinate: activeProps.activeCoordinate\n      }));\n    }\n  }\n});\nexport var mouseMoveAction = createAction('mouseMove');\nexport var mouseMoveMiddleware = createListenerMiddleware();\n\n/*\n * This single rafId is safe because:\n * 1. Each chart has its own Redux store instance with its own middleware\n * 2. mouseMoveAction only fires from one DOM element (the chart wrapper)\n * 3. Rapid mousemove events from the same element SHOULD debounce - we only care about the latest position\n * This is different from externalEventsMiddleware which handles multiple event types\n * (click, mouseenter, mouseleave, etc.) that should NOT cancel each other.\n */\nvar rafId = null;\nmouseMoveMiddleware.startListening({\n  actionCreator: mouseMoveAction,\n  effect: (action, listenerApi) => {\n    var mousePointer = action.payload;\n\n    // Cancel any pending animation frame\n    if (rafId !== null) {\n      cancelAnimationFrame(rafId);\n    }\n    var chartPointer = getChartPointer(mousePointer);\n\n    // Schedule the dispatch for the next animation frame\n    rafId = requestAnimationFrame(() => {\n      var state = listenerApi.getState();\n      var tooltipEventType = selectTooltipEventType(state, state.tooltip.settings.shared);\n      // this functionality only applies to charts that have axes\n      if (tooltipEventType === 'axis') {\n        var activeProps = selectActivePropsFromChartPointer(state, chartPointer);\n        if ((activeProps === null || activeProps === void 0 ? void 0 : activeProps.activeIndex) != null) {\n          listenerApi.dispatch(setMouseOverAxisIndex({\n            activeIndex: activeProps.activeIndex,\n            activeDataKey: undefined,\n            activeCoordinate: activeProps.activeCoordinate\n          }));\n        } else {\n          // this is needed to clear tooltip state when the mouse moves out of the inRange (svg - offset) function, but not yet out of the svg\n          listenerApi.dispatch(mouseLeaveChart());\n        }\n      }\n      rafId = null;\n    });\n  }\n});"],"mappings":"AAAA,OAASA,YAAY,CAAEC,wBAAwB,KAAQ,kBAAkB,CACzE,OAASC,eAAe,CAAEC,sBAAsB,CAAEC,qBAAqB,KAAQ,gBAAgB,CAC/F,OAASC,iCAAiC,KAAQ,+CAA+C,CACjG,OAASC,sBAAsB,KAAQ,oCAAoC,CAC3E,OAASC,eAAe,KAAQ,yBAAyB,CACzD,MAAO,IAAI,CAAAC,gBAAgB,CAAGR,YAAY,CAAC,YAAY,CAAC,CACxD,MAAO,IAAI,CAAAS,oBAAoB,CAAGR,wBAAwB,CAAC,CAAC,CAE5D;AACAQ,oBAAoB,CAACC,cAAc,CAAC,CAClCC,aAAa,CAAEH,gBAAgB,CAC/BI,MAAM,CAAEA,CAACC,MAAM,CAAEC,WAAW,GAAK,CAC/B,GAAI,CAAAC,YAAY,CAAGF,MAAM,CAACG,OAAO,CACjC,GAAI,CAAAC,WAAW,CAAGZ,iCAAiC,CAACS,WAAW,CAACI,QAAQ,CAAC,CAAC,CAAEX,eAAe,CAACQ,YAAY,CAAC,CAAC,CAC1G,GAAI,CAACE,WAAW,GAAK,IAAI,EAAIA,WAAW,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,WAAW,CAACE,WAAW,GAAK,IAAI,CAAE,CAC/FL,WAAW,CAACM,QAAQ,CAACjB,sBAAsB,CAAC,CAC1CgB,WAAW,CAAEF,WAAW,CAACE,WAAW,CACpCE,aAAa,CAAEC,SAAS,CACxBC,gBAAgB,CAAEN,WAAW,CAACM,gBAChC,CAAC,CAAC,CAAC,CACL,CACF,CACF,CAAC,CAAC,CACF,MAAO,IAAI,CAAAC,eAAe,CAAGxB,YAAY,CAAC,WAAW,CAAC,CACtD,MAAO,IAAI,CAAAyB,mBAAmB,CAAGxB,wBAAwB,CAAC,CAAC,CAE3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,GAAI,CAAAyB,KAAK,CAAG,IAAI,CAChBD,mBAAmB,CAACf,cAAc,CAAC,CACjCC,aAAa,CAAEa,eAAe,CAC9BZ,MAAM,CAAEA,CAACC,MAAM,CAAEC,WAAW,GAAK,CAC/B,GAAI,CAAAC,YAAY,CAAGF,MAAM,CAACG,OAAO,CAEjC;AACA,GAAIU,KAAK,GAAK,IAAI,CAAE,CAClBC,oBAAoB,CAACD,KAAK,CAAC,CAC7B,CACA,GAAI,CAAAE,YAAY,CAAGrB,eAAe,CAACQ,YAAY,CAAC,CAEhD;AACAW,KAAK,CAAGG,qBAAqB,CAAC,IAAM,CAClC,GAAI,CAAAC,KAAK,CAAGhB,WAAW,CAACI,QAAQ,CAAC,CAAC,CAClC,GAAI,CAAAa,gBAAgB,CAAGzB,sBAAsB,CAACwB,KAAK,CAAEA,KAAK,CAACE,OAAO,CAACC,QAAQ,CAACC,MAAM,CAAC,CACnF;AACA,GAAIH,gBAAgB,GAAK,MAAM,CAAE,CAC/B,GAAI,CAAAd,WAAW,CAAGZ,iCAAiC,CAACyB,KAAK,CAAEF,YAAY,CAAC,CACxE,GAAI,CAACX,WAAW,GAAK,IAAI,EAAIA,WAAW,GAAK,IAAK,EAAC,CAAG,IAAK,EAAC,CAAGA,WAAW,CAACE,WAAW,GAAK,IAAI,CAAE,CAC/FL,WAAW,CAACM,QAAQ,CAAChB,qBAAqB,CAAC,CACzCe,WAAW,CAAEF,WAAW,CAACE,WAAW,CACpCE,aAAa,CAAEC,SAAS,CACxBC,gBAAgB,CAAEN,WAAW,CAACM,gBAChC,CAAC,CAAC,CAAC,CACL,CAAC,IAAM,CACL;AACAT,WAAW,CAACM,QAAQ,CAAClB,eAAe,CAAC,CAAC,CAAC,CACzC,CACF,CACAwB,KAAK,CAAG,IAAI,CACd,CAAC,CAAC,CACJ,CACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}