{"ast":null,"code":"import{getAuthHeaders}from'./db';const API_BASE_URL=\"\".concat(process.env.REACT_APP_API_URL||'http://localhost:3001',\"/api\");// Record a user interaction with optional message\nexport const recordInteraction=async(fromUserId,toUserId,type,message)=>{console.log('Recording interaction:',{fromUserId,toUserId,type,message});const response=await fetch(\"\".concat(API_BASE_URL,\"/interactions\"),{method:'POST',headers:getAuthHeaders(),body:JSON.stringify({toUserId,type,message})});console.log('Interaction API response status:',response.status);if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||'Failed to record interaction');}const result=await response.json();console.log('Interaction result:',result);return result;};// Update an existing interaction message\nexport const updateInteractionMessage=async(interactionId,message)=>{console.log('Updating interaction message:',{interactionId,message});const response=await fetch(\"\".concat(API_BASE_URL,\"/interactions/\").concat(interactionId,\"/message\"),{method:'PUT',headers:getAuthHeaders(),body:JSON.stringify({message})});console.log('Update interaction message API response status:',response.status);if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||'Failed to update interaction message');}const result=await response.json();console.log('Update interaction message result:',result);return result;};// Delete an interaction\nexport const deleteInteraction=async interactionId=>{console.log('Deleting interaction:',{interactionId});const response=await fetch(\"\".concat(API_BASE_URL,\"/interactions/\").concat(interactionId),{method:'DELETE',headers:getAuthHeaders()});console.log('Delete interaction API response status:',response.status);if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||'Failed to delete interaction');}const result=await response.json();console.log('Delete interaction result:',result);return result;};","map":{"version":3,"names":["getAuthHeaders","API_BASE_URL","concat","process","env","REACT_APP_API_URL","recordInteraction","fromUserId","toUserId","type","message","console","log","response","fetch","method","headers","body","JSON","stringify","status","ok","errorData","json","catch","Error","error","result","updateInteractionMessage","interactionId","deleteInteraction"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/services/interactionService.ts"],"sourcesContent":["import { InteractionType } from '../types';\nimport { getAuthHeaders } from './db';\n\nconst API_BASE_URL = `${process.env.REACT_APP_API_URL || 'http://localhost:3001'}/api`;\n\n// Record a user interaction with optional message\nexport const recordInteraction = async (\n  fromUserId: string,\n  toUserId: string,\n  type: InteractionType,\n  message?: string\n): Promise<{ isMatch: boolean; interaction: any }> => {\n  console.log('Recording interaction:', { fromUserId, toUserId, type, message });\n\n  const response = await fetch(`${API_BASE_URL}/interactions`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({\n      toUserId,\n      type,\n      message\n    }),\n  });\n\n  console.log('Interaction API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to record interaction');\n  }\n\n  const result = await response.json();\n  console.log('Interaction result:', result);\n  return result;\n};\n\n// Update an existing interaction message\nexport const updateInteractionMessage = async (\n  interactionId: string,\n  message: string\n): Promise<{ interaction: any }> => {\n  console.log('Updating interaction message:', { interactionId, message });\n\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}/message`, {\n    method: 'PUT',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({ message }),\n  });\n\n  console.log('Update interaction message API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to update interaction message');\n  }\n\n  const result = await response.json();\n  console.log('Update interaction message result:', result);\n  return result;\n};\n\n// Delete an interaction\nexport const deleteInteraction = async (\n  interactionId: string\n): Promise<{ interaction: any }> => {\n  console.log('Deleting interaction:', { interactionId });\n\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}`, {\n    method: 'DELETE',\n    headers: getAuthHeaders(),\n  });\n\n  console.log('Delete interaction API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to delete interaction');\n  }\n\n  const result = await response.json();\n  console.log('Delete interaction result:', result);\n  return result;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}