{"ast":null,"code":"import { getAuthHeaders } from './db';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\n// Record a user interaction with optional message\nexport const recordInteraction = async (fromUserId, toUserId, type, message) => {\n  console.log('Recording interaction:', {\n    fromUserId,\n    toUserId,\n    type,\n    message\n  });\n  const response = await fetch(`${API_BASE_URL}/interactions`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({\n      toUserId,\n      type,\n      message\n    })\n  });\n  console.log('Interaction API response status:', response.status);\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to record interaction');\n  }\n  const result = await response.json();\n  console.log('Interaction result:', result);\n  return result;\n};\n\n// Update an existing interaction message\nexport const updateInteractionMessage = async (interactionId, message) => {\n  console.log('Updating interaction message:', {\n    interactionId,\n    message\n  });\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}/message`, {\n    method: 'PUT',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({\n      message\n    })\n  });\n  console.log('Update interaction message API response status:', response.status);\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to update interaction message');\n  }\n  const result = await response.json();\n  console.log('Update interaction message result:', result);\n  return result;\n};\n\n// Delete an interaction\nexport const deleteInteraction = async interactionId => {\n  console.log('Deleting interaction:', {\n    interactionId\n  });\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}`, {\n    method: 'DELETE',\n    headers: getAuthHeaders()\n  });\n  console.log('Delete interaction API response status:', response.status);\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to delete interaction');\n  }\n  const result = await response.json();\n  console.log('Delete interaction result:', result);\n  return result;\n};","map":{"version":3,"names":["getAuthHeaders","API_BASE_URL","process","env","REACT_APP_API_URL","recordInteraction","fromUserId","toUserId","type","message","console","log","response","fetch","method","headers","body","JSON","stringify","status","ok","errorData","json","catch","Error","error","result","updateInteractionMessage","interactionId","deleteInteraction"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/services/interactionService.ts"],"sourcesContent":["import { InteractionType } from '../types';\nimport { getAuthHeaders } from './db';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\n// Record a user interaction with optional message\nexport const recordInteraction = async (\n  fromUserId: string,\n  toUserId: string,\n  type: InteractionType,\n  message?: string\n): Promise<{ isMatch: boolean; interaction: any }> => {\n  console.log('Recording interaction:', { fromUserId, toUserId, type, message });\n\n  const response = await fetch(`${API_BASE_URL}/interactions`, {\n    method: 'POST',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({\n      toUserId,\n      type,\n      message\n    }),\n  });\n\n  console.log('Interaction API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to record interaction');\n  }\n\n  const result = await response.json();\n  console.log('Interaction result:', result);\n  return result;\n};\n\n// Update an existing interaction message\nexport const updateInteractionMessage = async (\n  interactionId: string,\n  message: string\n): Promise<{ interaction: any }> => {\n  console.log('Updating interaction message:', { interactionId, message });\n\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}/message`, {\n    method: 'PUT',\n    headers: getAuthHeaders(),\n    body: JSON.stringify({ message }),\n  });\n\n  console.log('Update interaction message API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to update interaction message');\n  }\n\n  const result = await response.json();\n  console.log('Update interaction message result:', result);\n  return result;\n};\n\n// Delete an interaction\nexport const deleteInteraction = async (\n  interactionId: string\n): Promise<{ interaction: any }> => {\n  console.log('Deleting interaction:', { interactionId });\n\n  const response = await fetch(`${API_BASE_URL}/interactions/${interactionId}`, {\n    method: 'DELETE',\n    headers: getAuthHeaders(),\n  });\n\n  console.log('Delete interaction API response status:', response.status);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || 'Failed to delete interaction');\n  }\n\n  const result = await response.json();\n  console.log('Delete interaction result:', result);\n  return result;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}