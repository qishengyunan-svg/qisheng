{"ast":null,"code":"import{createAction,createListenerMiddleware}from'@reduxjs/toolkit';import{setKeyboardInteraction}from'./tooltipSlice';import{selectTooltipAxisDomain,selectTooltipAxisTicks,selectTooltipDisplayedData}from'./selectors/tooltipSelectors';import{selectCoordinateForDefaultIndex}from'./selectors/selectors';import{selectChartDirection,selectTooltipAxisDataKey}from'./selectors/axisSelectors';import{combineActiveTooltipIndex}from'./selectors/combiners/combineActiveTooltipIndex';export var keyDownAction=createAction('keyDown');export var focusAction=createAction('focus');export var keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(action,listenerApi)=>{var state=listenerApi.getState();var accessibilityLayerIsActive=state.rootProps.accessibilityLayer!==false;if(!accessibilityLayerIsActive){return;}var{keyboardInteraction}=state.tooltip;var key=action.payload;if(key!=='ArrowRight'&&key!=='ArrowLeft'&&key!=='Enter'){return;}// TODO this is lacking index for charts that do not support numeric indexes\nvar resolvedIndex=combineActiveTooltipIndex(keyboardInteraction,selectTooltipDisplayedData(state),selectTooltipAxisDataKey(state),selectTooltipAxisDomain(state));var currentIndex=resolvedIndex==null?-1:Number(resolvedIndex);if(!Number.isFinite(currentIndex)||currentIndex<0){return;}var tooltipTicks=selectTooltipAxisTicks(state);if(key==='Enter'){var _coordinate=selectCoordinateForDefaultIndex(state,'axis','hover',String(keyboardInteraction.index));listenerApi.dispatch(setKeyboardInteraction({active:!keyboardInteraction.active,activeIndex:keyboardInteraction.index,activeDataKey:keyboardInteraction.dataKey,activeCoordinate:_coordinate}));return;}var direction=selectChartDirection(state);var directionMultiplier=direction==='left-to-right'?1:-1;var movement=key==='ArrowRight'?1:-1;var nextIndex=currentIndex+movement*directionMultiplier;if(tooltipTicks==null||nextIndex>=tooltipTicks.length||nextIndex<0){return;}var coordinate=selectCoordinateForDefaultIndex(state,'axis','hover',String(nextIndex));listenerApi.dispatch(setKeyboardInteraction({active:true,activeIndex:nextIndex.toString(),activeDataKey:undefined,activeCoordinate:coordinate}));}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(_action,listenerApi)=>{var state=listenerApi.getState();var accessibilityLayerIsActive=state.rootProps.accessibilityLayer!==false;if(!accessibilityLayerIsActive){return;}var{keyboardInteraction}=state.tooltip;if(keyboardInteraction.active){return;}if(keyboardInteraction.index==null){var nextIndex='0';var coordinate=selectCoordinateForDefaultIndex(state,'axis','hover',String(nextIndex));listenerApi.dispatch(setKeyboardInteraction({activeDataKey:undefined,active:true,activeIndex:nextIndex,activeCoordinate:coordinate}));}}});","map":{"version":3,"names":["createAction","createListenerMiddleware","setKeyboardInteraction","selectTooltipAxisDomain","selectTooltipAxisTicks","selectTooltipDisplayedData","selectCoordinateForDefaultIndex","selectChartDirection","selectTooltipAxisDataKey","combineActiveTooltipIndex","keyDownAction","focusAction","keyboardEventsMiddleware","startListening","actionCreator","effect","action","listenerApi","state","getState","accessibilityLayerIsActive","rootProps","accessibilityLayer","keyboardInteraction","tooltip","key","payload","resolvedIndex","currentIndex","Number","isFinite","tooltipTicks","_coordinate","String","index","dispatch","active","activeIndex","activeDataKey","dataKey","activeCoordinate","direction","directionMultiplier","movement","nextIndex","length","coordinate","toString","undefined","_action"],"sources":["E:/program/ai交友网站demo/dating-app/frontend/src/node_modules/recharts/es6/state/keyboardEventsMiddleware.js"],"sourcesContent":["import { createAction, createListenerMiddleware } from '@reduxjs/toolkit';\nimport { setKeyboardInteraction } from './tooltipSlice';\nimport { selectTooltipAxisDomain, selectTooltipAxisTicks, selectTooltipDisplayedData } from './selectors/tooltipSelectors';\nimport { selectCoordinateForDefaultIndex } from './selectors/selectors';\nimport { selectChartDirection, selectTooltipAxisDataKey } from './selectors/axisSelectors';\nimport { combineActiveTooltipIndex } from './selectors/combiners/combineActiveTooltipIndex';\nexport var keyDownAction = createAction('keyDown');\nexport var focusAction = createAction('focus');\nexport var keyboardEventsMiddleware = createListenerMiddleware();\nkeyboardEventsMiddleware.startListening({\n  actionCreator: keyDownAction,\n  effect: (action, listenerApi) => {\n    var state = listenerApi.getState();\n    var accessibilityLayerIsActive = state.rootProps.accessibilityLayer !== false;\n    if (!accessibilityLayerIsActive) {\n      return;\n    }\n    var {\n      keyboardInteraction\n    } = state.tooltip;\n    var key = action.payload;\n    if (key !== 'ArrowRight' && key !== 'ArrowLeft' && key !== 'Enter') {\n      return;\n    }\n\n    // TODO this is lacking index for charts that do not support numeric indexes\n    var resolvedIndex = combineActiveTooltipIndex(keyboardInteraction, selectTooltipDisplayedData(state), selectTooltipAxisDataKey(state), selectTooltipAxisDomain(state));\n    var currentIndex = resolvedIndex == null ? -1 : Number(resolvedIndex);\n    if (!Number.isFinite(currentIndex) || currentIndex < 0) {\n      return;\n    }\n    var tooltipTicks = selectTooltipAxisTicks(state);\n    if (key === 'Enter') {\n      var _coordinate = selectCoordinateForDefaultIndex(state, 'axis', 'hover', String(keyboardInteraction.index));\n      listenerApi.dispatch(setKeyboardInteraction({\n        active: !keyboardInteraction.active,\n        activeIndex: keyboardInteraction.index,\n        activeDataKey: keyboardInteraction.dataKey,\n        activeCoordinate: _coordinate\n      }));\n      return;\n    }\n    var direction = selectChartDirection(state);\n    var directionMultiplier = direction === 'left-to-right' ? 1 : -1;\n    var movement = key === 'ArrowRight' ? 1 : -1;\n    var nextIndex = currentIndex + movement * directionMultiplier;\n    if (tooltipTicks == null || nextIndex >= tooltipTicks.length || nextIndex < 0) {\n      return;\n    }\n    var coordinate = selectCoordinateForDefaultIndex(state, 'axis', 'hover', String(nextIndex));\n    listenerApi.dispatch(setKeyboardInteraction({\n      active: true,\n      activeIndex: nextIndex.toString(),\n      activeDataKey: undefined,\n      activeCoordinate: coordinate\n    }));\n  }\n});\nkeyboardEventsMiddleware.startListening({\n  actionCreator: focusAction,\n  effect: (_action, listenerApi) => {\n    var state = listenerApi.getState();\n    var accessibilityLayerIsActive = state.rootProps.accessibilityLayer !== false;\n    if (!accessibilityLayerIsActive) {\n      return;\n    }\n    var {\n      keyboardInteraction\n    } = state.tooltip;\n    if (keyboardInteraction.active) {\n      return;\n    }\n    if (keyboardInteraction.index == null) {\n      var nextIndex = '0';\n      var coordinate = selectCoordinateForDefaultIndex(state, 'axis', 'hover', String(nextIndex));\n      listenerApi.dispatch(setKeyboardInteraction({\n        activeDataKey: undefined,\n        active: true,\n        activeIndex: nextIndex,\n        activeCoordinate: coordinate\n      }));\n    }\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}